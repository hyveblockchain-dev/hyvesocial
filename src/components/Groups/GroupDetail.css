.discord-member-popup-role-tag {
  position: relative;
}
.discord-role-remove-btn {
  background: none;
  border: none;
  color: #e74c3c;
  font-size: 15px;
  margin-left: 4px;
  cursor: pointer;
  padding: 0 2px;
  border-radius: 2px;
  transition: background 0.13s;
  position: relative;
  top: 1px;
}
.discord-role-remove-btn:hover {
  background: #2b2d31;
}
/* Discord-style role picker dropdown for member popup */
.discord-role-add-wrap {
  position: relative;
  display: inline-block;
}
.discord-role-add-btn {
  background: #232428;
  color: #dbdee1;
  border: 1px solid #3f4147;
  border-radius: 4px;
  width: 24px;
  height: 24px;
  font-size: 18px;
  font-weight: bold;
  cursor: pointer;
  margin-left: 6px;
  transition: background 0.15s;
}
.discord-role-add-btn:hover {
  background: #313338;
}
.discord-role-picker-dropdown {
  position: absolute;
  left: 0;
  top: 32px;
  min-width: 180px;
  max-width: 240px;
  max-height: 220px;
  background: #232428;
  border: 1px solid #3f4147;
  border-radius: 8px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.25);
  z-index: 1001;
  padding: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
.discord-role-picker-header {
  font-size: 13px;
  font-weight: 600;
  color: #b5bac1;
  padding: 10px 14px 4px 14px;
  border-bottom: 1px solid #313338;
}
.discord-role-picker-search {
  padding: 8px 14px 4px 14px;
}
.discord-role-picker-search input {
  width: 100%;
  background: #1e1f22;
  border: 1px solid #3f4147;
  border-radius: 4px;
  padding: 6px 10px;
  font-size: 13px;
  color: #dbdee1;
  outline: none;
  box-sizing: border-box;
}
.discord-role-picker-list {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 4px 0 4px 0;
}
.discord-role-picker-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  font-size: 13px;
  color: #dbdee1;
  cursor: pointer;
  border: none;
  background: none;
  transition: background 0.13s;
}
.discord-role-picker-item:hover {
  background: #313338;
}
.discord-role-picker-empty {
  color: #80848e;
  font-size: 13px;
  padding: 12px 16px;
  text-align: center;
}
.discord-role-remove-btn {
  background: none;
  border: none;
  color: #e74c3c;
  font-size: 15px;
  margin-left: 4px;
  cursor: pointer;
  padding: 0 2px;
  border-radius: 2px;
  transition: background 0.13s;
}
.discord-role-remove-btn:hover {
  background: #2b2d31;
}
/* ═══════════════════════════════════════════════════════════
   Discord-style Group Detail — full-page 3-column layout
   ═══════════════════════════════════════════════════════════ */

/* ── Full-page wrapper (outside Layout) ── */
.discord-fullpage {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  flex-direction: column;
  background: #1e1f22;
  overflow: hidden;
}

/* ── Top navbar ── */
.discord-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  height: 52px;
  min-height: 52px;
  background: #111214;
  border-bottom: 1px solid #1e1f22;
  flex-shrink: 0;
  z-index: 10;
}
.discord-topbar-logo {
  display: flex;
  align-items: center;
  gap: 8px;
  text-decoration: none;
  color: #f2f3f5;
  font-weight: 800;
  font-size: 16px;
  flex-shrink: 0;
}
.discord-topbar-logo-img {
  width: 30px;
  height: 30px;
  object-fit: contain;
}
.discord-topbar-center {
  flex: 1;
  display: flex;
  justify-content: center;
}
.discord-topbar-group-name {
  font-size: 14px;
  font-weight: 600;
  color: #b5bac1;
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.discord-topbar-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
}
.discord-topbar-link {
  color: #b5bac1;
  text-decoration: none;
  font-size: 13px;
  font-weight: 600;
  padding: 6px 12px;
  border-radius: 4px;
  transition: background 0.15s, color 0.15s;
}
.discord-topbar-link:hover {
  background: #2b2d31;
  color: #f2f3f5;
}

/* ── Loading / error ── */
.discord-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  color: #b5bac1;
  font-size: 15px;
  font-weight: 500;
}
.discord-loading.error { color: #ed4245; }

/* ── Body row (guild bar + server) ── */
.discord-body {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* ═══════════════════════════════════════════════════════════
   Guild icon bar (far-left server strip)
   ═══════════════════════════════════════════════════════════ */
.discord-guild-bar {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 72px;
  min-width: 72px;
  background: #1e1f22;
  padding: 12px 0 12px;
  gap: 8px;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: none;
  flex-shrink: 0;
}
.discord-guild-bar::-webkit-scrollbar { width: 0; display: none; }

.guild-icon {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: #313338;
  color: #dbdee1;
  text-decoration: none;
  overflow: hidden;
  transition: border-radius 0.2s, background 0.2s, color 0.2s;
  cursor: pointer;
  flex-shrink: 0;
}
.guild-icon img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.guild-icon:hover,
.guild-icon.guild-active {
  border-radius: 16px;
}
.guild-icon:hover {
  background: #5865f2;
  color: #fff;
}
.guild-icon.guild-active {
  background: #5865f2;
  color: #fff;
}

/* Home icon */
.guild-home {
  background: #313338;
}
.guild-home:hover {
  background: #5865f2;
}
.guild-home img {
  width: 28px;
  height: 28px;
  object-fit: contain;
}

/* Active pill indicator */
.guild-pill {
  position: absolute;
  left: -16px;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 40px;
  border-radius: 0 4px 4px 0;
  background: #f2f3f5;
}
.guild-icon:not(.guild-active):hover .guild-pill {
  display: none;
}

/* Hover pill for non-active */
.guild-icon:not(.guild-active)::before {
  content: '';
  position: absolute;
  left: -16px;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 0;
  border-radius: 0 4px 4px 0;
  background: #f2f3f5;
  transition: height 0.15s;
}
.guild-icon:not(.guild-active):hover::before {
  height: 20px;
}

/* Letter fallback */
.guild-icon-letter {
  font-size: 18px;
  font-weight: 700;
  line-height: 1;
  pointer-events: none;
}

/* Add / Explore button */
.guild-add {
  background: #313338;
  color: #23a55a;
  font-size: 24px;
  font-weight: 300;
}
.guild-add:hover {
  background: #23a55a;
  color: #fff;
}

/* Separator line */
.guild-separator {
  width: 32px;
  height: 2px;
  border-radius: 1px;
  background: #35363c;
  flex-shrink: 0;
}

/* ── Private join screen ── */
.discord-join-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 70vh;
  padding: 24px;
}
.discord-back-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 24px;
  transition: color 0.15s;
}
.discord-back-btn:hover { color: #fff; }
.discord-join-card {
  background: #2b2d31;
  border-radius: 12px;
  padding: 48px 40px;
  text-align: center;
  max-width: 420px;
  width: 100%;
  box-shadow: 0 8px 24px rgba(0,0,0,0.4);
}
.discord-join-avatar {
  width: 80px; height: 80px;
  border-radius: 24px;
  display: grid;
  place-items: center;
  font-weight: 900;
  font-size: 28px;
  color: #0a0a0f;
  background: linear-gradient(135deg, var(--gold-primary, #f0b232), var(--gold-dark, #c48d1a));
  margin: 0 auto 16px;
  overflow: hidden;
}
.discord-join-avatar img { width: 100%; height: 100%; object-fit: cover; }
.discord-join-card h1 {
  margin: 0 0 8px;
  font-size: 24px;
  color: #f2f3f5;
}
.discord-join-desc {
  color: #b5bac1;
  font-size: 14px;
  margin: 0 0 6px;
  line-height: 1.5;
}
.discord-join-meta {
  color: #80848e;
  font-size: 12px;
  margin: 0 0 20px;
}
.discord-join-btn {
  background: linear-gradient(135deg, var(--gold-primary, #f0b232), var(--gold-dark, #c48d1a));
  color: #0a0a0f;
  border: none;
  border-radius: 6px;
  padding: 10px 24px;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  transition: filter 0.15s;
}
.discord-join-btn:hover { filter: brightness(1.1); }
.discord-join-btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* ══════════════════════════════════════════════════════════
   3-column server layout
   ══════════════════════════════════════════════════════════ */
.discord-server {
  display: grid;
  grid-template-columns: 240px 1fr 240px;
  flex: 1;
  min-height: 0;
  background: #313338;
}

/* ── LEFT SIDEBAR ── */
.discord-sidebar {
  display: flex;
  flex-direction: column;
  background: #2b2d31;
  border-right: 1px solid #1e1f22;
  overflow: visible;
  min-height: 0;
}

.discord-server-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;
  border-bottom: 1px solid #1e1f22;
  min-height: 48px;
  flex-shrink: 0;
  cursor: pointer;
  transition: background 0.12s;
  position: relative;
}
.discord-server-header:hover {
  background: rgba(79, 84, 92, 0.3);
}
.discord-server-chevron {
  color: #b5bac1;
  font-size: 12px;
  margin-left: auto;
  transition: transform 0.2s;
}
.discord-server-chevron.open {
  transform: rotate(180deg);
}
.discord-back-arrow {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  display: flex;
  align-items: center;
  padding: 4px;
  border-radius: 4px;
  transition: background 0.15s, color 0.15s;
}
.discord-back-arrow:hover { background: #35373c; color: #fff; }

/* ── Server dropdown menu ── */
.discord-server-dropdown {
  position: fixed;
  z-index: 9999;
  background: #111214;
  border-radius: 4px;
  padding: 6px 8px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.5);
  display: flex;
  flex-direction: column;
  gap: 2px;
  animation: dropdown-in 0.12s ease;
}
@keyframes dropdown-in {
  from { opacity: 0; transform: translateY(-6px); }
  to { opacity: 1; transform: translateY(0); }
}
.discord-server-dropdown button {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 13px;
  padding: 7px 8px;
  border-radius: 3px;
  cursor: pointer;
  text-align: left;
  transition: background 0.1s, color 0.1s;
}
.discord-server-dropdown button:hover {
  background: #5865f2;
  color: #fff;
}
.discord-server-dropdown button:hover .dropdown-icon {
  color: #fff;
}
.discord-server-dropdown button:hover .dropdown-arrow {
  color: #fff;
}
.discord-server-dropdown button:hover .dropdown-toggle.active {
  background: #3ba55c;
}
.discord-server-dropdown button span {
  flex: 1;
  min-width: 0;
}
.discord-server-dropdown .dropdown-icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  color: #b5bac1;
}
.discord-server-dropdown .dropdown-arrow {
  width: 10px;
  height: 10px;
  flex-shrink: 0;
  color: #b5bac1;
  margin-left: auto;
}
/* Toggle switch */
.dropdown-toggle {
  display: inline-flex;
  align-items: center;
  width: 28px;
  height: 16px;
  background: #72767d;
  border-radius: 8px;
  position: relative;
  flex-shrink: 0;
  margin-left: auto;
  transition: background 0.2s;
}
.dropdown-toggle.active {
  background: #3ba55c;
}
.dropdown-toggle-knob {
  width: 12px;
  height: 12px;
  background: #fff;
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  transition: left 0.2s;
}
.dropdown-toggle.active .dropdown-toggle-knob {
  left: 14px;
}
/* Boost item */
.discord-dropdown-boost .dropdown-icon path {
  fill: #ff73fa;
}
.discord-dropdown-boost:hover .dropdown-icon path {
  fill: #fff;
}
.discord-dropdown-sep {
  height: 1px;
  background: #2b2d31;
  margin: 4px 0;
}
.discord-dropdown-danger {
  color: #ed4245 !important;
}
.discord-dropdown-danger .dropdown-icon {
  color: #ed4245 !important;
}
.discord-dropdown-danger:hover {
  background: #ed4245 !important;
  color: #fff !important;
}
.discord-dropdown-danger:hover .dropdown-icon {
  color: #fff !important;
}
.discord-server-avatar {
  width: 32px; height: 32px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  font-weight: 800;
  font-size: 13px;
  color: #0a0a0f;
  background: linear-gradient(135deg, var(--gold-primary, #f0b232), var(--gold-dark, #c48d1a));
  flex-shrink: 0;
  overflow: hidden;
}
.discord-server-avatar img { width: 100%; height: 100%; object-fit: cover; }
.discord-server-name {
  font-size: 15px;
  font-weight: 700;
  color: #f2f3f5;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.discord-sidebar-join {
  padding: 8px 14px;
  flex-shrink: 0;
}
.discord-sidebar-join .discord-join-btn {
  width: 100%;
  padding: 8px;
  font-size: 13px;
}

/* ── Channel list ── */
.discord-channel-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px 0;
  scrollbar-width: thin;
  scrollbar-color: #1a1b1e transparent;
}
.discord-channel-list::-webkit-scrollbar { width: 6px; }
.discord-channel-list::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 4px; }

.discord-category {
  margin-bottom: 2px;
}
.discord-category-header {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  cursor: pointer;
  user-select: none;
  transition: background 0.1s;
}
.discord-category-header:hover { background: #35373c; }
.discord-category-arrow {
  color: #80848e;
  font-size: 8px;
  transition: transform 0.15s;
  width: 14px;
  text-align: center;
}
.discord-category-arrow.collapsed { transform: rotate(-90deg); }
.discord-category-name {
  font-size: 11px;
  font-weight: 700;
  color: #80848e;
  letter-spacing: 0.04em;
  flex: 1;
}
.discord-category-delete {
  background: none;
  border: none;
  color: #80848e;
  font-size: 12px;
  cursor: pointer;
  padding: 2px 4px;
  border-radius: 3px;
  opacity: 0;
  transition: opacity 0.15s;
}
.discord-category-header:hover .discord-category-delete { opacity: 1; }
.discord-category-delete:hover { color: #ed4245; }

.discord-channel {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px 6px 20px;
  cursor: pointer;
  border-radius: 4px;
  margin: 1px 8px;
  color: #80848e;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
  position: relative;
}
.discord-channel:hover {
  background: #35373c;
  color: #dbdee1;
}
.discord-channel.active {
  background: #404249;
  color: #f2f3f5;
}
.discord-channel-hash {
  font-size: 18px;
  font-weight: 500;
  opacity: 0.6;
  flex-shrink: 0;
  width: 20px;
}
.discord-channel-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-weight: 500;
}
.discord-channel-delete {
  background: none;
  border: none;
  color: #80848e;
  font-size: 12px;
  cursor: pointer;
  padding: 2px 4px;
  border-radius: 3px;
  opacity: 0;
  transition: opacity 0.15s;
}
.discord-channel:hover .discord-channel-delete { opacity: 1; }
.discord-channel-delete:hover { color: #ed4245; }

/* ── Channel inline actions (edit + delete) ── */
.discord-channel-actions-inline {
  display: flex;
  gap: 2px;
  opacity: 0;
  transition: opacity 0.15s;
  flex-shrink: 0;
}
.discord-channel:hover .discord-channel-actions-inline { opacity: 1; }
.discord-channel-edit {
  background: none;
  border: none;
  color: #80848e;
  font-size: 12px;
  cursor: pointer;
  padding: 2px 4px;
  border-radius: 3px;
  transition: color 0.12s;
}
.discord-channel-edit:hover { color: #f2f3f5; }

/* ── Channel edit form (inline) ── */
.discord-channel-edit-form {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 4px 12px 4px 20px;
  margin: 2px 8px;
}
.discord-channel-edit-form input {
  background: #1e1f22;
  border: 1px solid #3f4147;
  border-radius: 3px;
  color: #f2f3f5;
  padding: 4px 8px;
  font-size: 12px;
  outline: none;
}
.discord-channel-edit-form input:focus {
  border-color: #5865f2;
}

/* ── Create channel / category forms ── */
.discord-channel-actions {
  padding: 4px 12px;
  flex-shrink: 0;
}
.discord-add-channel {
  background: none;
  border: none;
  color: #80848e;
  font-size: 12px;
  cursor: pointer;
  padding: 6px 8px;
  border-radius: 4px;
  width: 100%;
  text-align: left;
  transition: color 0.15s, background 0.15s;
}
.discord-add-channel:hover { color: #f2f3f5; background: #35373c; }

.discord-create-form {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 6px 0;
}
.discord-create-form input,
.discord-create-form select {
  background: #1e1f22;
  border: 1px solid #3f4147;
  border-radius: 4px;
  color: #f2f3f5;
  padding: 6px 8px;
  font-size: 13px;
  outline: none;
  transition: border-color 0.15s;
}
.discord-create-form input:focus,
.discord-create-form select:focus {
  border-color: var(--gold-primary, #f0b232);
}
.discord-create-btns {
  display: flex;
  gap: 6px;
}
.discord-create-btns button {
  flex: 1;
  background: #404249;
  border: none;
  color: #f2f3f5;
  padding: 5px;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  transition: background 0.15s;
}
.discord-create-btns button:first-child {
  background: linear-gradient(135deg, var(--gold-primary, #f0b232), var(--gold-dark, #c48d1a));
  color: #0a0a0f;
  font-weight: 600;
}
.discord-create-btns button:first-child:disabled { opacity: 0.5; }
.discord-create-btns button:last-child:hover { background: #4e5058; }

/* ── Nav items at bottom of sidebar ── */
.discord-nav-divider {
  height: 1px;
  background: #1e1f22;
  margin: 4px 12px;
  flex-shrink: 0;
}
.discord-nav-items {
  padding: 4px 8px;
  flex-shrink: 0;
}
.discord-nav-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  background: none;
  border: none;
  color: #80848e;
  font-size: 14px;
  font-weight: 500;
  padding: 7px 10px;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.1s, color 0.1s;
  text-align: left;
}
.discord-nav-item:hover { background: #35373c; color: #dbdee1; }
.discord-nav-item.active { background: #404249; color: #f2f3f5; }
.discord-nav-icon { font-size: 16px; width: 22px; text-align: center; flex-shrink: 0; }

/* ── Sidebar footer ── */
.discord-sidebar-footer {
  padding: 10px 12px;
  border-top: 1px solid #1e1f22;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.discord-leave-btn {
  background: transparent;
  border: 1px solid #ed4245;
  color: #ed4245;
  border-radius: 4px;
  padding: 6px 10px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s;
  width: 100%;
}
.discord-leave-btn:hover { background: rgba(237, 66, 69, 0.15); }
.discord-leave-btn:disabled { opacity: 0.5; }

.discord-view-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #80848e;
  font-size: 11px;
  cursor: pointer;
}
.discord-view-toggle input { accent-color: var(--gold-primary, #f0b232); }

/* ── User panel (Discord-style bottom bar) ── */
.discord-user-panel {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 8px;
  height: 52px;
  min-height: 52px;
  background: #232428;
  flex-shrink: 0;
}
.discord-user-panel-avatar {
  position: relative;
  width: 32px;
  height: 32px;
  flex-shrink: 0;
}
.discord-user-panel-avatar img {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}
.discord-user-panel-dot {
  position: absolute;
  bottom: -1px;
  right: -1px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #23a55a;
  border: 2px solid #232428;
}
.discord-user-panel-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
}
.discord-user-panel-name {
  font-size: 13px;
  font-weight: 600;
  color: #f2f3f5;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.discord-user-panel-status {
  font-size: 11px;
  color: #80848e;
}
.discord-user-panel-icons {
  display: flex;
  gap: 2px;
  flex-shrink: 0;
}
.discord-user-panel-icons button {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  font-size: 16px;
  padding: 4px 6px;
  border-radius: 4px;
  transition: background 0.12s, color 0.12s;
}
.discord-user-panel-icons button:hover {
  background: #36373d;
  color: #f2f3f5;
}

/* ══════════════════════════════════════════════════════════
   CENTER MAIN CONTENT
   ══════════════════════════════════════════════════════════ */
.discord-main {
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: #313338;
  position: relative;
}

.discord-notice {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  background: #2d2f2c;
  border-bottom: 1px solid #3f4147;
  padding: 8px 16px;
  color: #e0d49f;
  font-size: 13px;
  flex-shrink: 0;
}
.discord-notice button {
  background: none;
  border: none;
  color: #80848e;
  cursor: pointer;
  font-size: 14px;
  padding: 2px 6px;
}
.discord-notice button:hover { color: #f2f3f5; }

/* ── Panel containers ── */
.discord-panel {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
}
.discord-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 16px;
  border-bottom: 1px solid #1e1f22;
  flex-shrink: 0;
  min-height: 48px;
}
.discord-panel-header h2 {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
  color: #f2f3f5;
}
.discord-panel-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  scrollbar-width: thin;
  scrollbar-color: #1a1b1e transparent;
}
.discord-panel-content::-webkit-scrollbar { width: 8px; }
.discord-panel-content::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 4px; }

/* ── Utility classes ── */
.discord-muted { color: #80848e; font-size: 13px; }

/* ── Discussion panel / posts ── */
.discord-posts { display: flex; flex-direction: column; gap: 16px; }
.discord-post {
  border: 1px solid #3f4147;
  border-radius: 8px;
  background: #2b2d31;
  overflow: hidden;
}
.discord-post.pinned {
  border-color: var(--gold-primary, #f0b232);
  box-shadow: 0 0 0 1px rgba(240, 178, 50, 0.2);
}
.discord-post-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 12px;
  background: rgba(0,0,0,0.15);
  border-bottom: 1px solid #3f4147;
}
.discord-post-badges { display: flex; gap: 6px; align-items: center; }
.discord-pin-badge {
  font-size: 11px;
  font-weight: 600;
  color: var(--gold-primary, #f0b232);
}

.discord-status-badge {
  font-size: 10px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 3px;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}
.discord-status-badge.pending { background: #5865f2; color: #fff; }
.discord-status-badge.rejected { background: #ed4245; color: #fff; }
.discord-status-badge.approved { background: #57f287; color: #0a0a0f; }

/* ── Buttons ── */
.discord-tiny-btn {
  background: #404249;
  border: none;
  color: #f2f3f5;
  padding: 5px 10px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s;
  white-space: nowrap;
}
.discord-tiny-btn:hover { background: #4e5058; }
.discord-tiny-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.discord-tiny-btn.danger { background: #ed4245; color: #fff; }
.discord-tiny-btn.danger:hover { background: #c73a3d; }
.discord-tiny-btn.secondary { background: #35373c; color: #80848e; }

/* ══════════════════════════════════════════════════════════
   ABOUT PANEL
   ══════════════════════════════════════════════════════════ */
.discord-about-section {
  margin-bottom: 24px;
}
.discord-about-section h3 {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: #b5bac1;
  margin: 0 0 10px;
}
.discord-about-section p {
  color: #dbdee1;
  font-size: 14px;
  line-height: 1.6;
  margin: 0 0 8px;
}
.discord-edit-desc textarea {
  width: 100%;
  background: #1e1f22;
  border: 1px solid #3f4147;
  border-radius: 6px;
  color: #f2f3f5;
  padding: 10px;
  font-size: 14px;
  font-family: inherit;
  resize: vertical;
  outline: none;
  box-sizing: border-box;
}
.discord-edit-desc textarea:focus { border-color: var(--gold-primary, #f0b232); }
.discord-edit-btns { display: flex; gap: 8px; margin-top: 8px; }

.discord-about-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 24px;
}
.discord-about-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
  background: #2b2d31;
  padding: 10px 12px;
  border-radius: 6px;
}
.discord-about-k {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: #80848e;
}
.discord-about-v {
  font-size: 14px;
  color: #f2f3f5;
  text-transform: capitalize;
}

/* ── Invite ── */
.discord-invite-search {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}
.discord-invite-search input {
  flex: 1;
  background: #1e1f22;
  border: 1px solid #3f4147;
  border-radius: 6px;
  color: #f2f3f5;
  padding: 8px 12px;
  font-size: 13px;
  outline: none;
}
.discord-invite-search input:focus { border-color: var(--gold-primary, #f0b232); }
.discord-invite-results {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.discord-invite-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 10px;
  border-radius: 4px;
  background: #2b2d31;
}
.discord-invite-user {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #f2f3f5;
  font-size: 14px;
}
.discord-invite-avatar {
  width: 28px; height: 28px;
  border-radius: 50%;
  object-fit: cover;
}

/* ══════════════════════════════════════════════════════════
   ROLES PANEL
   ══════════════════════════════════════════════════════════ */
.discord-roles-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 16px;
}
.discord-role-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: #2b2d31;
  border-radius: 6px;
}
.discord-role-color {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  flex-shrink: 0;
}
.discord-role-name { font-size: 14px; font-weight: 600; flex: 1; }
.discord-create-role-form {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
  margin-bottom: 16px;
}
.discord-create-role-form input[type="text"] {
  flex: 1;
  min-width: 120px;
  background: #1e1f22;
  border: 1px solid #3f4147;
  border-radius: 4px;
  color: #f2f3f5;
  padding: 6px 10px;
  font-size: 13px;
  outline: none;
}
.discord-create-role-form input[type="text"]:focus { border-color: var(--gold-primary, #f0b232); }
.discord-create-role-form input[type="color"] {
  width: 32px; height: 32px;
  border: none;
  border-radius: 4px;
  background: none;
  cursor: pointer;
}
.discord-role-badge-inline {
  font-size: 10px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 3px;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  background: #404249;
  color: #b5bac1;
}
.discord-role-badge-inline.owner { background: var(--gold-primary, #f0b232); color: #0a0a0f; }
.discord-role-badge-inline.admin { background: #5865f2; color: #fff; }

/* ── Members admin list ── */
.discord-members-admin { display: flex; flex-direction: column; gap: 4px; }
.discord-member-admin-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 6px 10px;
  border-radius: 4px;
  background: #2b2d31;
}
.discord-member-admin-info { display: flex; align-items: center; gap: 8px; }
.discord-member-admin-avatar {
  width: 28px; height: 28px;
  border-radius: 50%;
  object-fit: cover;
}
.discord-member-admin-name { font-size: 14px; color: #f2f3f5; }
.discord-member-admin-actions { display: flex; gap: 4px; flex-wrap: wrap; }

/* ══════════════════════════════════════════════════════════
   ADMIN PANEL (Server Settings)
   ══════════════════════════════════════════════════════════ */
.discord-admin-section {
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid #3f4147;
}
.discord-admin-section:last-child { border-bottom: none; }
.discord-admin-section h3 {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: #b5bac1;
  margin: 0 0 12px;
}

.discord-admin-row {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 8px;
}
.discord-admin-row select {
  background: #1e1f22;
  border: 1px solid #3f4147;
  border-radius: 4px;
  color: #f2f3f5;
  padding: 6px 10px;
  font-size: 13px;
  outline: none;
}
.discord-admin-row select:focus { border-color: var(--gold-primary, #f0b232); }

.discord-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #dbdee1;
  font-size: 13px;
  cursor: pointer;
}
.discord-toggle input { accent-color: var(--gold-primary, #f0b232); }

/* ── Appearance ── */
.discord-appearance-row {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
}
.discord-appearance-item {
  flex: 1;
  min-width: 160px;
}
.discord-appearance-item label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: #b5bac1;
  margin-bottom: 8px;
}
.discord-image-upload { display: flex; flex-direction: column; gap: 8px; }
.discord-cover-preview {
  width: 100%;
  height: 80px;
  border-radius: 6px;
  background-color: #1e1f22;
  background-size: cover;
  background-position: center;
  display: grid;
  place-items: center;
  border: 1px solid #3f4147;
}
.discord-cover-preview span { color: #80848e; font-size: 12px; }
.discord-avatar-preview {
  width: 56px; height: 56px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  background: linear-gradient(135deg, var(--gold-primary, #f0b232), var(--gold-dark, #c48d1a));
  overflow: hidden;
  border: 1px solid #3f4147;
}
.discord-avatar-preview img { width: 100%; height: 100%; object-fit: cover; }
.discord-avatar-preview span { font-weight: 800; font-size: 20px; color: #0a0a0f; }

/* ── Pending list (reusable pattern) ── */
.discord-pending-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.discord-pending-item {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 12px;
  background: #2b2d31;
  border-radius: 6px;
  font-size: 13px;
  color: #dbdee1;
  line-height: 1.5;
}
.discord-pending-actions { display: flex; gap: 4px; flex-shrink: 0; }

/* ── Danger zone ── */
.discord-danger-zone {
  border: 1px solid #ed4245 !important;
  border-radius: 8px;
  padding: 16px !important;
  background: rgba(237, 66, 69, 0.05);
}
.discord-danger-zone h3 { color: #ed4245 !important; }
.discord-delete-btn {
  background: #ed4245;
  border: none;
  color: #fff;
  padding: 8px 16px;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s;
  margin-top: 8px;
}
.discord-delete-btn:hover { background: #c73a3d; }
.discord-delete-btn:disabled { opacity: 0.5; }

/* ══════════════════════════════════════════════════════════
   MEMBER POPUP CARD (Discord-style profile popup)
   ══════════════════════════════════════════════════════════ */
.discord-member-popup {
  position: fixed;
  z-index: 1000;
  width: 300px;
  background: #232428;
  border-radius: 8px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.45);
  overflow: hidden;
  animation: discord-popup-in 0.15s ease-out;
}
@keyframes discord-popup-in {
  from { opacity: 0; transform: scale(0.95) translateY(4px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}
.discord-member-popup-banner {
  height: 60px;
  background: linear-gradient(135deg, #5865f2 0%, #eb459e 100%);
}
.discord-member-popup-avatar-wrap {
  position: relative;
  margin: -36px 0 0 16px;
  width: 80px;
  height: 80px;
}
.discord-member-popup-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  border: 6px solid #232428;
  background: #232428;
}
.discord-member-popup-status-dot {
  position: absolute;
  bottom: 4px;
  right: 4px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #23a55a;
  border: 4px solid #232428;
}
.discord-member-popup-body {
  padding: 12px 16px 16px;
}
.discord-member-popup-name {
  margin: 0 0 0;
  font-size: 20px;
  font-weight: 700;
  color: #f2f3f5;
  line-height: 1.2;
}
.discord-member-popup-handle {
  display: block;
  font-size: 13px;
  color: #b5bac1;
  margin-bottom: 4px;
}
.discord-member-popup-divider {
  height: 1px;
  background: #3f4147;
  margin: 12px 0;
}
.discord-member-popup-section {
  margin-bottom: 12px;
}
.discord-member-popup-section h4 {
  margin: 0 0 6px;
  font-size: 12px;
  font-weight: 700;
  color: #b5bac1;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}
.discord-member-popup-section p {
  margin: 0;
  font-size: 13px;
  color: #dbdee1;
}
.discord-member-popup-roles {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}
.discord-member-popup-role-tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  border-radius: 4px;
  background: #2b2d31;
  border: 1px solid #3f4147;
  font-size: 12px;
  font-weight: 500;
  color: #dbdee1;
  text-transform: capitalize;
}
.discord-role-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #5865f2;
  flex-shrink: 0;
}
.discord-member-popup-note {
  margin-bottom: 12px;
}
.discord-member-popup-note h4 {
  margin: 0 0 6px;
  font-size: 12px;
  font-weight: 700;
  color: #b5bac1;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}
.discord-member-popup-note input {
  width: 100%;
  background: transparent;
  border: none;
  padding: 0;
  font-size: 12px;
  color: #80848e;
  outline: none;
  cursor: text;
  box-sizing: border-box;
}
.discord-member-popup-note input:focus {
  color: #dbdee1;
}
.discord-member-popup-msg {
  margin-top: 4px;
}
.discord-member-popup-msg input {
  width: 100%;
  background: #1e1f22;
  border: none;
  border-radius: 8px;
  padding: 10px 12px;
  font-size: 14px;
  color: #dbdee1;
  outline: none;
  box-sizing: border-box;
}
.discord-member-popup-msg input::placeholder {
  color: #5c5e66;
}
.discord-member-popup-msg input:focus {
  box-shadow: 0 0 0 1px #5865f2;
}

/* ══════════════════════════════════════════════════════════
   CREATE SERVER MODAL
   ══════════════════════════════════════════════════════════ */
.discord-create-modal-overlay {
  position: fixed;
  inset: 0;
  z-index: 2000;
  background: rgba(0,0,0,0.7);
  display: grid;
  place-items: center;
  animation: modal-fade-in 0.15s ease-out;
}
@keyframes modal-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}
.discord-create-modal {
  position: relative;
  width: 440px;
  max-height: 80vh;
  background: #313338;
  border-radius: 8px;
  box-shadow: 0 8px 40px rgba(0,0,0,0.5);
  overflow-y: auto;
  animation: modal-scale-in 0.2s ease-out;
  scrollbar-width: thin;
  scrollbar-color: #1a1b1e transparent;
}
@keyframes modal-scale-in {
  from { opacity: 0; transform: scale(0.92); }
  to { opacity: 1; transform: scale(1); }
}
.discord-create-modal::-webkit-scrollbar { width: 6px; }
.discord-create-modal::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 4px; }
.discord-create-modal-close {
  position: absolute;
  top: 12px;
  right: 12px;
  background: none;
  border: none;
  color: #80848e;
  font-size: 20px;
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: grid;
  place-items: center;
  border-radius: 50%;
  transition: color 0.12s, background 0.12s;
  z-index: 5;
}
.discord-create-modal-close:hover {
  color: #f2f3f5;
  background: rgba(255,255,255,0.1);
}
.discord-create-modal-header {
  text-align: center;
  padding: 24px 24px 0;
}
.discord-create-modal-header h2 {
  margin: 0 0 8px;
  font-size: 24px;
  font-weight: 700;
  color: #f2f3f5;
}
.discord-create-modal-header p {
  margin: 0;
  font-size: 14px;
  color: #b5bac1;
  line-height: 1.4;
}
/* ── Options list ── */
.discord-create-modal-options {
  padding: 16px;
}
.discord-create-modal-label {
  font-size: 11px;
  font-weight: 700;
  color: #b5bac1;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  padding: 16px 8px 8px;
}
.discord-create-modal-option {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px;
  background: none;
  border: 1px solid #3f4147;
  border-radius: 8px;
  cursor: pointer;
  color: #f2f3f5;
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 8px;
  transition: background 0.12s, border-color 0.12s;
  text-align: left;
}
.discord-create-modal-option:hover {
  background: #36373d;
  border-color: #5c5e66;
}
.discord-create-modal-option-icon {
  width: 40px;
  height: 40px;
  display: grid;
  place-items: center;
  font-size: 24px;
  flex-shrink: 0;
}
.discord-create-modal-arrow {
  margin-left: auto;
  font-size: 20px;
  color: #80848e;
  font-weight: 700;
}
/* ── Footer ── */
.discord-create-modal-footer {
  padding: 16px 24px 24px;
  text-align: center;
  background: #2b2d31;
  border-top: 1px solid #1e1f22;
}
.discord-create-modal-footer h3 {
  margin: 0 0 8px;
  font-size: 18px;
  font-weight: 600;
  color: #f2f3f5;
}
.discord-create-modal-join-btn {
  width: 100%;
  padding: 10px;
  background: #4e5058;
  border: none;
  border-radius: 8px;
  color: #f2f3f5;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.12s;
}
.discord-create-modal-join-btn:hover {
  background: #5c5e66;
}
/* ── Form step ── */
.discord-create-modal-form {
  padding: 16px 24px 8px;
}
.discord-create-modal-form label {
  display: block;
  margin-bottom: 16px;
}
.discord-create-modal-form-label {
  display: block;
  margin-bottom: 6px;
  font-size: 12px;
  font-weight: 700;
  color: #b5bac1;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}
.discord-create-modal-form input[type="text"],
.discord-create-modal-form textarea,
.discord-create-modal-form select {
  width: 100%;
  background: #1e1f22;
  border: none;
  border-radius: 4px;
  padding: 10px 12px;
  font-size: 15px;
  color: #f2f3f5;
  outline: none;
  font-family: inherit;
  box-sizing: border-box;
}
.discord-create-modal-form input:focus,
.discord-create-modal-form textarea:focus,
.discord-create-modal-form select:focus {
  box-shadow: 0 0 0 2px #5865f2;
}
.discord-create-modal-form textarea {
  resize: vertical;
  min-height: 60px;
}
.discord-create-modal-form select {
  cursor: pointer;
  appearance: auto;
}
.discord-create-modal-form input::placeholder,
.discord-create-modal-form textarea::placeholder {
  color: #5c5e66;
}
.discord-create-modal-hint {
  margin: 0;
  font-size: 12px;
  color: #80848e;
  line-height: 1.3;
}
/* ── Actions bar ── */
.discord-create-modal-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  background: #2b2d31;
  border-top: 1px solid #1e1f22;
}
.discord-create-modal-back {
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  padding: 4px 8px;
}
.discord-create-modal-back:hover { color: #f2f3f5; text-decoration: underline; }
.discord-create-modal-submit {
  padding: 10px 28px;
  background: #5865f2;
  border: none;
  border-radius: 4px;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.12s;
}
.discord-create-modal-submit:hover { background: #4752c4; }
.discord-create-modal-submit:disabled { opacity: 0.5; cursor: not-allowed; }

/* ── Explore icon ── */
.guild-explore {
  background: #313338;
  color: #23a55a;
  border: none;
  cursor: pointer;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  transition: border-radius 0.2s, background 0.2s, color 0.2s;
}
.guild-explore:hover {
  border-radius: 16px;
  background: #23a55a;
  color: #fff;
}

/* ══════════════════════════════════════════════════════════
   LIGHT MODE OVERRIDES
   ══════════════════════════════════════════════════════════ */
.light-mode .discord-server { background: #f2f3f5; }
.light-mode .discord-sidebar { background: #f2f3f5; border-right-color: #e3e5e8; }
.light-mode .discord-server-header { border-bottom-color: #e3e5e8; }
.light-mode .discord-server-name { color: #060607; }
.light-mode .discord-main { background: #fff; }
.light-mode .discord-channel:hover { background: #e3e5e8; color: #060607; }
.light-mode .discord-channel.active { background: #d7d8dc; color: #060607; }
.light-mode .discord-channel { color: #5c5e66; }
.light-mode .discord-category-name { color: #5c5e66; }
.light-mode .discord-category-arrow { color: #5c5e66; }
.light-mode .discord-nav-item { color: #5c5e66; }
.light-mode .discord-nav-item:hover { background: #e3e5e8; color: #060607; }
.light-mode .discord-nav-item.active { background: #d7d8dc; color: #060607; }
.light-mode .discord-nav-divider { background: #e3e5e8; }
.light-mode .discord-sidebar-footer { border-top-color: #e3e5e8; }
.light-mode .discord-user-panel { background: #ebedef; }
.light-mode .discord-user-panel-name { color: #060607; }
.light-mode .discord-user-panel-dot { border-color: #ebedef; }
.light-mode .discord-user-panel-icons button { color: #4e5058; }
.light-mode .discord-user-panel-icons button:hover { background: #d7d8dc; color: #060607; }
.light-mode .discord-notice { background: #f9f3e0; border-bottom-color: #e3e5e8; color: #806a33; }
.light-mode .discord-panel-header { border-bottom-color: #e3e5e8; }
.light-mode .discord-panel-header h2 { color: #060607; }
.light-mode .discord-muted { color: #5c5e66; }
.light-mode .discord-post { background: #fff; border-color: #e3e5e8; }
.light-mode .discord-post-toolbar { background: rgba(0,0,0,0.03); border-bottom-color: #e3e5e8; }
.light-mode .discord-about-item { background: #f2f3f5; }
.light-mode .discord-about-k { color: #5c5e66; }
.light-mode .discord-about-v { color: #060607; }
.light-mode .discord-pending-item { background: #f2f3f5; color: #060607; }
.light-mode .discord-role-item { background: #f2f3f5; }
.light-mode .discord-member-admin-item { background: #f2f3f5; }
.light-mode .discord-member-admin-name { color: #060607; }
.light-mode .discord-invite-item { background: #f2f3f5; }
.light-mode .discord-invite-user { color: #060607; }
.light-mode .discord-join-card { background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
.light-mode .discord-join-card h1 { color: #060607; }
.light-mode .discord-loading { color: #5c5e66; }
.light-mode .discord-create-form input,
.light-mode .discord-create-form select,
.light-mode .discord-admin-row select,
.light-mode .discord-invite-search input,
.light-mode .discord-edit-desc textarea,
.light-mode .discord-create-role-form input[type="text"] {
  background: #fff;
  border-color: #e3e5e8;
  color: #060607;
}
.light-mode .discord-tiny-btn { background: #e3e5e8; color: #060607; }
.light-mode .discord-tiny-btn:hover { background: #d7d8dc; }
.light-mode .discord-tiny-btn.danger { background: #ed4245; color: #fff; }
.light-mode .discord-back-arrow:hover { background: #e3e5e8; }
.light-mode .discord-server-dropdown { background: #fff; box-shadow: 0 8px 24px rgba(0,0,0,0.15); }
.light-mode .discord-server-dropdown button { color: #4e5058; }
.light-mode .discord-server-dropdown button:hover { background: #5865f2; color: #fff; }
.light-mode .discord-server-dropdown .dropdown-icon { color: #4e5058; }
.light-mode .discord-server-dropdown button:hover .dropdown-icon { color: #fff; }
.light-mode .discord-server-dropdown .dropdown-arrow { color: #4e5058; }
.light-mode .discord-dropdown-sep { background: #e3e5e8; }
.light-mode .dropdown-toggle { background: #c4c9ce; }
.light-mode .dropdown-toggle.active { background: #3ba55c; }
.light-mode .discord-server-chevron { color: #5c5e66; }
.light-mode .discord-server-header:hover { background: rgba(116,124,134,.15); }
.light-mode .discord-channel-edit-form input { background: #fff; border-color: #e3e5e8; color: #060607; }
.light-mode .discord-cover-preview { background-color: #f2f3f5; border-color: #e3e5e8; }
.light-mode .discord-avatar-preview { border-color: #e3e5e8; }
.light-mode .discord-admin-section { border-bottom-color: #e3e5e8; }
.light-mode .discord-fullpage { background: #e3e5e8; }
.light-mode .discord-topbar { background: #fff; border-bottom-color: #e3e5e8; }
.light-mode .discord-topbar-logo { color: #060607; }
.light-mode .discord-topbar-group-name { color: #5c5e66; }
.light-mode .discord-topbar-link { color: #5c5e66; }
.light-mode .discord-topbar-link:hover { background: #f2f3f5; color: #060607; }
.light-mode .discord-guild-bar { background: #e3e5e8; }
.light-mode .guild-icon { background: #fff; color: #4e5058; }
.light-mode .guild-icon:hover { background: #5865f2; color: #fff; }
.light-mode .guild-icon.guild-active { background: #5865f2; color: #fff; }
.light-mode .guild-pill { background: #060607; }
.light-mode .guild-icon:not(.guild-active)::before { background: #060607; }
.light-mode .guild-separator { background: #d1d3d7; }
.light-mode .guild-add { background: #fff; color: #23a55a; }
.light-mode .guild-add:hover { background: #23a55a; color: #fff; }
.light-mode .discord-member-popup { background: #fff; box-shadow: 0 8px 32px rgba(0,0,0,0.15); }
.light-mode .discord-member-popup-avatar { border-color: #fff; background: #fff; }
.light-mode .discord-member-popup-status-dot { border-color: #fff; }
.light-mode .discord-member-popup-name { color: #060607; }
.light-mode .discord-member-popup-handle { color: #4e5058; }
.light-mode .discord-member-popup-divider { background: #e3e5e8; }
.light-mode .discord-member-popup-section h4 { color: #4e5058; }
.light-mode .discord-member-popup-section p { color: #313338; }
.light-mode .discord-member-popup-role-tag { background: #f2f3f5; border-color: #e3e5e8; color: #313338; }
.light-mode .discord-member-popup-note h4 { color: #4e5058; }
.light-mode .discord-member-popup-note input { color: #80848e; }
.light-mode .discord-member-popup-note input:focus { color: #313338; }
.light-mode .discord-member-popup-msg input { background: #ebedef; color: #060607; }
.light-mode .discord-member-popup-msg input::placeholder { color: #80848e; }
.light-mode .discord-create-modal { background: #fff; }
.light-mode .discord-create-modal-close { color: #80848e; }
.light-mode .discord-create-modal-close:hover { color: #060607; background: rgba(0,0,0,0.06); }
.light-mode .discord-create-modal-header h2 { color: #060607; }
.light-mode .discord-create-modal-header p { color: #4e5058; }
.light-mode .discord-create-modal-option { border-color: #e3e5e8; color: #060607; }
.light-mode .discord-create-modal-option:hover { background: #f2f3f5; border-color: #d7d8dc; }
.light-mode .discord-create-modal-label { color: #4e5058; }
.light-mode .discord-create-modal-footer { background: #f2f3f5; border-top-color: #e3e5e8; }
.light-mode .discord-create-modal-footer h3 { color: #060607; }
.light-mode .discord-create-modal-join-btn { background: #e3e5e8; color: #060607; }
.light-mode .discord-create-modal-join-btn:hover { background: #d7d8dc; }
.light-mode .discord-create-modal-form input[type="text"],
.light-mode .discord-create-modal-form textarea,
.light-mode .discord-create-modal-form select { background: #ebedef; color: #060607; }
.light-mode .discord-create-modal-form input::placeholder,
.light-mode .discord-create-modal-form textarea::placeholder { color: #80848e; }
.light-mode .discord-create-modal-form-label { color: #4e5058; }
.light-mode .discord-create-modal-actions { background: #f2f3f5; border-top-color: #e3e5e8; }
.light-mode .discord-create-modal-back { color: #4e5058; }
.light-mode .discord-create-modal-back:hover { color: #060607; }
.light-mode .discord-create-modal-hint { color: #80848e; }
.light-mode .guild-explore { background: #fff; }
.light-mode .guild-explore:hover { background: #23a55a; color: #fff; }

/* ══════════════════════════════════════════════════════════
   DM MODE SIDEBAR
   ══════════════════════════════════════════════════════════ */
.discord-dm-layout {
  grid-template-columns: 240px 1fr !important;
}
.discord-dm-layout.dmd-fullwidth {
  grid-template-columns: 1fr !important;
}

.discord-dm-sidebar {
  display: flex;
  flex-direction: column;
  background: #2b2d31;
  overflow: hidden;
}

.discord-dm-search {
  padding: 10px 10px 6px;
  flex-shrink: 0;
}
.discord-dm-search input {
  width: 100%;
  background: #1e1f22;
  border: none;
  border-radius: 4px;
  padding: 7px 10px;
  color: #b5bac1;
  font-size: 13px;
  outline: none;
}
.discord-dm-search input::placeholder { color: #6d6f78; }
.discord-dm-search input:focus { box-shadow: 0 0 0 1px #5865f2; }

.discord-dm-nav {
  padding: 6px 8px 2px;
  flex-shrink: 0;
}
.discord-dm-nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  background: none;
  color: #b5bac1;
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.12s, color 0.12s;
}
.discord-dm-nav-item:hover { background: #35373c; color: #dbdee1; }
.discord-dm-nav-item.active { background: #404249; color: #f2f3f5; }
.discord-dm-nav-item svg { flex-shrink: 0; }

.discord-dm-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 16px 6px;
  flex-shrink: 0;
}
.discord-dm-header span {
  font-size: 11px;
  font-weight: 700;
  color: #949ba4;
  letter-spacing: 0.02em;
  text-transform: uppercase;
}
.discord-dm-add {
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 18px;
  cursor: pointer;
  padding: 0 2px;
  line-height: 1;
}
.discord-dm-add:hover { color: #dbdee1; }

.discord-dm-list {
  flex: 1;
  overflow-y: auto;
  padding: 0 8px 8px;
}
.discord-dm-list::-webkit-scrollbar { width: 6px; }
.discord-dm-list::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 3px; }

.discord-dm-empty {
  padding: 20px 16px;
  color: #949ba4;
  font-size: 13px;
  text-align: center;
}

.discord-dm-item {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 7px 10px;
  border: none;
  border-radius: 4px;
  background: none;
  color: #b5bac1;
  cursor: pointer;
  transition: background 0.1s;
  text-align: left;
}
.discord-dm-item:hover { background: #35373c; color: #dbdee1; }
.discord-dm-item.active { background: #404249; color: #fff; }

.discord-dm-item-avatar {
  position: relative;
  flex-shrink: 0;
  width: 32px;
  height: 32px;
}
.discord-dm-item-avatar img {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}
.discord-dm-item-letter {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: #5865f2;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
}
.discord-dm-item-status {
  position: absolute;
  bottom: -1px;
  right: -1px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #747f8d;
  border: 2.5px solid #2b2d31;
}

.discord-dm-item-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
}
.discord-dm-item-name {
  font-size: 15px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.discord-dm-item-preview {
  font-size: 12px;
  color: #949ba4;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* DM main area */
.discord-dm-main {
  display: flex;
  flex-direction: column;
  background: #313338;
  min-height: 0;
}

.discord-dm-welcome {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #949ba4;
  gap: 8px;
}
.discord-dm-welcome h2 {
  color: #dbdee1;
  font-size: 20px;
  font-weight: 600;
  margin: 12px 0 0;
}
.discord-dm-welcome p {
  color: #949ba4;
  font-size: 14px;
}
.discord-dm-welcome-icon {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: #2b2d31;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* DM light mode */
.light-mode .discord-dm-sidebar { background: #f2f3f5; }
.light-mode .discord-dm-search input { background: #e3e5e8; color: #313338; }
.light-mode .discord-dm-search input::placeholder { color: #80848e; }
.light-mode .discord-dm-nav-item { color: #5c5e66; }
.light-mode .discord-dm-nav-item:hover { background: #e3e5e8; color: #313338; }
.light-mode .discord-dm-nav-item.active { background: #d4d7dc; color: #060607; }
.light-mode .discord-dm-header span { color: #5c5e66; }
.light-mode .discord-dm-add { color: #5c5e66; }
.light-mode .discord-dm-add:hover { color: #313338; }
.light-mode .discord-dm-empty { color: #80848e; }
.light-mode .discord-dm-item { color: #5c5e66; }
.light-mode .discord-dm-item:hover { background: #e3e5e8; color: #313338; }
.light-mode .discord-dm-item.active { background: #dde1e5; color: #060607; }
.light-mode .discord-dm-item-status { border-color: #f2f3f5; }
.light-mode .discord-dm-item-preview { color: #80848e; }
.light-mode .discord-dm-main { background: #fff; }
.light-mode .discord-dm-welcome { color: #80848e; }
.light-mode .discord-dm-welcome h2 { color: #313338; }
.light-mode .discord-dm-welcome-icon { background: #f2f3f5; }

/* ══════════════════════════════════════════════════════════
   DM CHAT (Discord-style flat messages)
   ══════════════════════════════════════════════════════════ */
.dm-chat-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
  background: #313338;
}

/* ── Header ── */
.dm-chat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  height: 48px;
  border-bottom: 1px solid #232428;
  flex-shrink: 0;
  box-sizing: border-box;
}
.dm-chat-header-left {
  display: flex;
  align-items: center;
  gap: 6px;
}
.dm-chat-header-at {
  color: #80848e;
  font-size: 20px;
  font-weight: 700;
}
.dm-chat-header-name {
  color: #f2f3f5;
  font-size: 15px;
  font-weight: 600;
}
.dm-chat-header-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}
.dm-header-action {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  padding: 6px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 0.12s;
}
.dm-header-action:hover { color: #dbdee1; }
.dm-header-action.active { color: #f2f3f5; }

/* ── Body (messages + profile) ── */
.dm-chat-body {
  flex: 1;
  display: flex;
  min-height: 0;
  overflow: hidden;
}

/* ── Messages area ── */
.dm-chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 16px 0 0;
  min-width: 0;
}
.dm-chat-messages::-webkit-scrollbar { width: 8px; }
.dm-chat-messages::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 4px; }
.dm-chat-messages::-webkit-scrollbar-track { background: transparent; }

.dm-chat-loading,
.dm-chat-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  color: #949ba4;
}
.dm-chat-empty-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  overflow: hidden;
  margin-bottom: 8px;
}
.dm-chat-empty-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.dm-empty-letter {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: #5865f2;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  font-weight: 700;
}
.dm-chat-empty h2 {
  color: #f2f3f5;
  font-size: 24px;
  font-weight: 700;
  margin: 8px 0 4px;
}
.dm-chat-empty p {
  color: #949ba4;
  font-size: 14px;
}
.dm-chat-empty p strong { color: #dbdee1; }

/* ── Message rows ── */
.dm-msg {
  padding: 2px 48px 2px 72px;
  position: relative;
  min-height: 22px;
  line-height: 1.375;
}
.dm-msg:hover { background: #2e3035; }

.dm-msg-full {
  display: flex;
  gap: 16px;
  padding: 4px 48px 4px 16px;
  margin-top: 16px;
}
.dm-msg-full:first-child { margin-top: 0; }

.dm-msg-avatar {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  overflow: hidden;
  cursor: pointer;
  margin-top: 2px;
}
.dm-msg-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.dm-msg-body {
  flex: 1;
  min-width: 0;
}
.dm-msg-header {
  display: flex;
  align-items: baseline;
  gap: 8px;
  margin-bottom: 1px;
}
.dm-msg-author {
  color: #f2f3f5;
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
}
.dm-msg-author:hover { text-decoration: underline; }
.dm-msg-time {
  color: #949ba4;
  font-size: 11px;
  font-weight: 400;
}
.dm-msg-content {
  color: #dbdee1;
  font-size: 15px;
  word-break: break-word;
  white-space: pre-wrap;
}

/* Grouped (continuation) message */
.dm-msg-grouped {
  padding-left: 72px;
  margin-top: 0;
}
.dm-msg-hover-time {
  position: absolute;
  left: 16px;
  width: 44px;
  text-align: right;
  color: #949ba4;
  font-size: 10px;
  line-height: 22px;
  opacity: 0;
  pointer-events: none;
  user-select: none;
}
.dm-msg-grouped:hover .dm-msg-hover-time { opacity: 1; }

/* GIF in messages */
.dm-msg-gif {
  max-width: 360px;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  margin: 4px 0;
}
.dm-msg-gif img {
  width: 100%;
  display: block;
  border-radius: 8px;
}

/* ── Input bar ── */
.dm-chat-input-bar {
  display: flex;
  align-items: center;
  gap: 0;
  margin: 0 16px 24px;
  background: #383a40;
  border-radius: 8px;
  padding: 0 12px;
  flex-shrink: 0;
  position: relative;
}
.dm-input-attach {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  padding: 8px 8px 8px 0;
  display: flex;
  align-items: center;
  flex-shrink: 0;
}
.dm-input-attach:hover { color: #dbdee1; }
.dm-chat-input-bar input {
  flex: 1;
  background: transparent;
  border: none;
  color: #dbdee1;
  font-size: 15px;
  padding: 12px 8px;
  outline: none;
  min-width: 0;
}
.dm-chat-input-bar input::placeholder { color: #6d6f78; }
.dm-input-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}
.dm-input-btn {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  padding: 6px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 0.1s;
}
.dm-input-btn:hover { color: #dbdee1; }
.dm-gif-label {
  font-size: 14px;
  font-weight: 700;
  letter-spacing: -0.02em;
}

/* ── GIF picker wrap ── */
.dm-gif-picker-wrap {
  position: absolute;
  bottom: 56px;
  right: 16px;
  z-index: 100;
}

/* ── Emoji picker ── */
.dm-emoji-picker {
  position: absolute;
  bottom: 56px;
  right: 16px;
  background: #2b2d31;
  border: 1px solid #3f4147;
  border-radius: 8px;
  padding: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  max-width: 240px;
  z-index: 100;
}
.dm-emoji-option {
  background: none;
  border: none;
  font-size: 22px;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
}
.dm-emoji-option:hover { background: #35373c; }

/* ══════════════════════════════════════════════════════════
   DM PROFILE PANEL (right side)
   ══════════════════════════════════════════════════════════ */
.dm-profile-panel {
  width: 340px;
  flex-shrink: 0;
  background: #232428;
  border-left: 1px solid #1e1f22;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}
.dm-profile-panel::-webkit-scrollbar { width: 6px; }
.dm-profile-panel::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 3px; }

.dm-profile-banner {
  height: 60px;
  background: linear-gradient(135deg, #5865f2, #eb459e);
  flex-shrink: 0;
}

.dm-profile-avatar-wrap {
  position: relative;
  width: 80px;
  height: 80px;
  margin: -40px 0 0 16px;
}
.dm-profile-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  border: 6px solid #232428;
  background: #232428;
}
.dm-profile-status-dot {
  position: absolute;
  bottom: 2px;
  right: 2px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #23a55a;
  border: 4px solid #232428;
}

.dm-profile-body {
  padding: 12px 16px 16px;
}
.dm-profile-name {
  color: #f2f3f5;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
}
.dm-profile-handle {
  color: #b5bac1;
  font-size: 13px;
  display: block;
  margin-top: 2px;
}
.dm-profile-divider {
  height: 1px;
  background: #3f4147;
  margin: 12px 0;
}
.dm-profile-section {
  margin-bottom: 12px;
}
.dm-profile-section h4 {
  color: #f2f3f5;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  margin: 0 0 4px;
}
.dm-profile-section p {
  color: #dbdee1;
  font-size: 13px;
  margin: 0;
  line-height: 1.4;
}

.dm-profile-mutual {
  margin-top: 8px;
}
.dm-profile-mutual-btn {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 8px 0;
  background: none;
  border: none;
  border-top: 1px solid #3f4147;
  color: #b5bac1;
  font-size: 13px;
  cursor: pointer;
}
.dm-profile-mutual-btn:hover { color: #dbdee1; }
.dm-profile-mutual-arrow {
  font-size: 18px;
  color: #949ba4;
}

/* ── DM Chat light mode ── */
.light-mode .dm-chat-container { background: #fff; }
.light-mode .dm-chat-header { border-bottom-color: #e3e5e8; }
.light-mode .dm-chat-header-at { color: #80848e; }
.light-mode .dm-chat-header-name { color: #060607; }
.light-mode .dm-header-action { color: #4e5058; }
.light-mode .dm-header-action:hover { color: #060607; }
.light-mode .dm-chat-messages { background: #fff; }
.light-mode .dm-msg:hover { background: #f6f6f7; }
.light-mode .dm-msg-author { color: #060607; }
.light-mode .dm-msg-time { color: #80848e; }
.light-mode .dm-msg-content { color: #313338; }
.light-mode .dm-msg-hover-time { color: #80848e; }
.light-mode .dm-chat-empty h2 { color: #060607; }
.light-mode .dm-chat-empty p { color: #80848e; }
.light-mode .dm-chat-empty p strong { color: #313338; }
.light-mode .dm-chat-input-bar { background: #ebedef; }
.light-mode .dm-chat-input-bar input { color: #313338; }
.light-mode .dm-chat-input-bar input::placeholder { color: #80848e; }
.light-mode .dm-input-attach { color: #4e5058; }
.light-mode .dm-input-attach:hover { color: #060607; }
.light-mode .dm-input-btn { color: #4e5058; }
.light-mode .dm-input-btn:hover { color: #060607; }
.light-mode .dm-emoji-picker { background: #fff; border-color: #e3e5e8; }
.light-mode .dm-emoji-option:hover { background: #f2f3f5; }
.light-mode .dm-profile-panel { background: #f2f3f5; border-left-color: #e3e5e8; }
.light-mode .dm-profile-avatar { border-color: #f2f3f5; background: #f2f3f5; }
.light-mode .dm-profile-status-dot { border-color: #f2f3f5; }
.light-mode .dm-profile-name { color: #060607; }
.light-mode .dm-profile-handle { color: #5c5e66; }
.light-mode .dm-profile-divider { background: #e3e5e8; }
.light-mode .dm-profile-section h4 { color: #060607; }
.light-mode .dm-profile-section p { color: #313338; }
.light-mode .dm-profile-mutual-btn { border-top-color: #e3e5e8; color: #5c5e66; }
.light-mode .dm-profile-mutual-btn:hover { color: #313338; }

/* ══════════════════════════════════════════════════════════
   DM CHAT — NEW FEATURES (edit, delete, reactions, typing,
   search, reply, attachments, date dividers, markdown)
   ══════════════════════════════════════════════════════════ */

/* ── Message hover actions toolbar ── */
.dm-msg {
  position: relative;
}
.dm-msg-actions {
  position: absolute;
  top: -16px;
  right: 16px;
  display: none;
  background: #2b2d31;
  border: 1px solid #3f4147;
  border-radius: 4px;
  padding: 2px;
  gap: 2px;
  z-index: 10;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}
.dm-msg:hover .dm-msg-actions { display: flex; }
.dm-msg-actions button {
  background: none;
  border: none;
  font-size: 16px;
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 3px;
  color: #b5bac1;
  transition: background 0.1s, color 0.1s;
  line-height: 1;
}
.dm-msg-actions button:hover {
  background: #35373c;
  color: #f2f3f5;
}

/* ── Editing mode ── */
.dm-msg-editing {
  background: rgba(88, 101, 242, 0.08) !important;
}
.dm-msg-edit {
  display: flex;
  flex-direction: column;
  gap: 4px;
  width: 100%;
}
.dm-msg-edit input {
  background: #383a40;
  border: 1px solid #5865f2;
  border-radius: 6px;
  color: #dbdee1;
  font-size: 15px;
  padding: 8px 12px;
  outline: none;
  width: 100%;
  box-sizing: border-box;
}
.dm-msg-edit input:focus {
  border-color: #5865f2;
  box-shadow: 0 0 0 2px rgba(88, 101, 242, 0.2);
}
.dm-msg-edit-hint {
  font-size: 11px;
  color: #949ba4;
}
.dm-msg-edit-hint button {
  background: none;
  border: none;
  color: #00a8fc;
  cursor: pointer;
  font-size: 11px;
  padding: 0;
}
.dm-msg-edit-hint button:hover {
  text-decoration: underline;
}
.dm-msg-edited {
  font-size: 11px;
  color: #949ba4;
  margin-left: 4px;
}

/* ── Reactions ── */
.dm-msg-reactions {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 4px;
  padding-left: 0;
}
.dm-reaction-badge {
  display: flex;
  align-items: center;
  gap: 4px;
  background: #2b2d31;
  border: 1px solid #3f4147;
  border-radius: 8px;
  padding: 2px 8px;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.15s, border-color 0.15s;
}
.dm-reaction-badge:hover {
  background: #35373c;
  border-color: #5865f2;
}
.dm-reaction-mine {
  background: rgba(88, 101, 242, 0.15);
  border-color: #5865f2;
}
.dm-reaction-badge .reaction-emoji {
  font-size: 16px;
  line-height: 1;
}
.dm-reaction-badge .reaction-count {
  font-size: 12px;
  color: #b5bac1;
  font-weight: 600;
  min-width: 8px;
  text-align: center;
}
.dm-reaction-mine .reaction-count {
  color: #5865f2;
}

/* ── Reaction picker dropdown ── */
.dm-reaction-picker {
  display: flex;
  gap: 2px;
  background: #2b2d31;
  border: 1px solid #3f4147;
  border-radius: 8px;
  padding: 4px;
  margin-top: 4px;
  z-index: 20;
}
.dm-reaction-picker button {
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  line-height: 1;
  transition: background 0.1s;
}
.dm-reaction-picker button:hover {
  background: #35373c;
}

/* ── Date dividers ── */
.dm-date-divider {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px 16px;
  margin: 16px 0 4px;
  position: relative;
}
.dm-date-divider::before,
.dm-date-divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: #3f4147;
}
.dm-date-divider span {
  padding: 0 8px;
  font-size: 12px;
  font-weight: 700;
  color: #949ba4;
  text-transform: uppercase;
  white-space: nowrap;
}

/* ── Reply bar (above input) ── */
.dm-reply-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 16px;
  background: #2e3035;
  border-top: 1px solid #3f4147;
  flex-shrink: 0;
  font-size: 13px;
  color: #b5bac1;
}
.dm-reply-bar strong {
  color: #f2f3f5;
}
.dm-reply-bar button {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  font-size: 16px;
  padding: 2px 6px;
  border-radius: 4px;
}
.dm-reply-bar button:hover {
  color: #f2f3f5;
  background: #35373c;
}

/* ── Reply reference in messages ── */
.dm-msg-reply-ref {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #949ba4;
  margin-bottom: 2px;
  padding: 2px 0;
  cursor: pointer;
}
.dm-msg-reply-ref:hover {
  color: #dbdee1;
}
.dm-reply-arrow {
  font-size: 14px;
  color: #5865f2;
}
.dm-reply-avatar {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  object-fit: cover;
}
.dm-reply-username {
  font-weight: 600;
  color: #b5bac1;
  font-size: 12px;
}
.dm-reply-preview {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 300px;
  font-size: 12px;
}

/* ── Search bar ── */
.dm-search-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 16px;
  background: #2b2d31;
  border-bottom: 1px solid #232428;
  flex-shrink: 0;
}
.dm-search-bar input {
  flex: 1;
  background: #1e1f22;
  border: none;
  border-radius: 4px;
  color: #dbdee1;
  font-size: 14px;
  padding: 6px 12px;
  outline: none;
}
.dm-search-bar input::placeholder { color: #6d6f78; }
.dm-search-count {
  font-size: 12px;
  color: #949ba4;
  white-space: nowrap;
}
.dm-search-bar button {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  font-size: 16px;
  padding: 4px;
}
.dm-search-bar button:hover { color: #f2f3f5; }

/* ── Typing indicator ── */
.dm-typing {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 16px;
  font-size: 13px;
  color: #b5bac1;
  flex-shrink: 0;
  min-height: 24px;
}
.dm-typing strong {
  color: #f2f3f5;
}
.dm-typing-dots {
  display: inline-flex;
  gap: 3px;
  align-items: flex-end;
  height: 12px;
}
.dm-typing-dots span {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #b5bac1;
  animation: dm-typing-bounce 1.4s ease-in-out infinite;
}
.dm-typing-dots span:nth-child(2) { animation-delay: 0.16s; }
.dm-typing-dots span:nth-child(3) { animation-delay: 0.32s; }
@keyframes dm-typing-bounce {
  0%, 60%, 100% { transform: translateY(0); }
  30% { transform: translateY(-6px); }
}

/* ── Jump to present ── */
.dm-jump-present {
  position: absolute;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  background: #5865f2;
  color: #fff;
  border: none;
  border-radius: 20px;
  padding: 6px 16px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  z-index: 10;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transition: background 0.15s;
  display: flex;
  align-items: center;
  gap: 4px;
}
.dm-jump-present:hover { background: #4752c4; }
.dm-jump-present span { font-size: 16px; }

/* ── Message image attachments ── */
.dm-msg-image {
  max-width: 400px;
  max-height: 300px;
  border-radius: 8px;
  cursor: pointer;
  margin: 4px 0;
  display: block;
}
.dm-msg-image:hover {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* ── Markdown code blocks ── */
.dm-code-block {
  background: #2b2d31;
  border: 1px solid #1e1f22;
  border-radius: 4px;
  padding: 8px 12px;
  margin: 4px 0;
  overflow-x: auto;
  font-family: 'Consolas', 'Monaco', 'Andale Mono', monospace;
  font-size: 13px;
  color: #dbdee1;
  line-height: 1.4;
  white-space: pre;
}
.dm-inline-code {
  background: #2b2d31;
  border: 1px solid #3f4147;
  border-radius: 3px;
  padding: 1px 4px;
  font-family: 'Consolas', 'Monaco', 'Andale Mono', monospace;
  font-size: 13.5px;
  color: #dbdee1;
}
.dm-msg-link {
  color: #00a8fc;
  text-decoration: none;
}
.dm-msg-link:hover {
  text-decoration: underline;
}

/* ── Updated lightbox ── */
.dm-lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  cursor: pointer;
}
.dm-lightbox img {
  max-width: 90vw;
  max-height: 90vh;
  border-radius: 8px;
  cursor: default;
}
.dm-lightbox-content {
  position: relative;
  cursor: default;
}
.dm-lightbox-content img {
  max-width: 90vw;
  max-height: 90vh;
  border-radius: 8px;
}
.dm-lightbox-close {
  position: absolute;
  top: -36px;
  right: -8px;
  background: none;
  border: none;
  color: #fff;
  font-size: 24px;
  cursor: pointer;
  padding: 4px 8px;
}
.dm-lightbox-close:hover { color: #ccc; }

/* ── Expanded emoji picker ── */
.dm-emoji-picker-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 8px;
  border-bottom: 1px solid #3f4147;
  margin-bottom: 6px;
}
.dm-emoji-picker-header span {
  font-size: 13px;
  font-weight: 700;
  color: #b5bac1;
  text-transform: uppercase;
}
.dm-emoji-picker-header button {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  font-size: 14px;
  padding: 2px 4px;
}
.dm-emoji-picker-header button:hover { color: #f2f3f5; }
.dm-emoji-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 2px;
  max-height: 200px;
  overflow-y: auto;
}
.dm-emoji-grid button {
  background: none;
  border: none;
  font-size: 22px;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  line-height: 1;
}
.dm-emoji-grid button:hover {
  background: #35373c;
}

/* ── Update emoji picker to be larger ── */
.dm-emoji-picker {
  position: absolute;
  bottom: 56px;
  right: 16px;
  background: #2b2d31;
  border: 1px solid #3f4147;
  border-radius: 8px;
  padding: 8px;
  max-width: 320px;
  width: 320px;
  z-index: 100;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
}

/* ── Light mode new features ── */
.light-mode .dm-msg-actions { background: #f2f3f5; border-color: #e3e5e8; }
.light-mode .dm-msg-actions button { color: #4e5058; }
.light-mode .dm-msg-actions button:hover { background: #e3e5e8; color: #060607; }
.light-mode .dm-msg-editing { background: rgba(88, 101, 242, 0.05) !important; }
.light-mode .dm-msg-edit input { background: #ebedef; border-color: #5865f2; color: #313338; }
.light-mode .dm-msg-edited { color: #80848e; }
.light-mode .dm-reaction-badge { background: #fff; border-color: #e3e5e8; }
.light-mode .dm-reaction-badge:hover { background: #f2f3f5; }
.light-mode .dm-reaction-mine { background: rgba(88, 101, 242, 0.1); }
.light-mode .dm-reaction-badge .reaction-count { color: #4e5058; }
.light-mode .dm-reaction-mine .reaction-count { color: #5865f2; }
.light-mode .dm-reaction-picker { background: #fff; border-color: #e3e5e8; }
.light-mode .dm-reaction-picker button:hover { background: #f2f3f5; }
.light-mode .dm-date-divider::before, .light-mode .dm-date-divider::after { background: #e3e5e8; }
.light-mode .dm-date-divider span { color: #80848e; }
.light-mode .dm-reply-bar { background: #f2f3f5; border-top-color: #e3e5e8; color: #4e5058; }
.light-mode .dm-reply-bar strong { color: #060607; }
.light-mode .dm-reply-bar button { color: #4e5058; }
.light-mode .dm-reply-bar button:hover { color: #060607; background: #e3e5e8; }
.light-mode .dm-msg-reply-ref { color: #80848e; }
.light-mode .dm-msg-reply-ref:hover { color: #313338; }
.light-mode .dm-reply-username { color: #4e5058; }
.light-mode .dm-search-bar { background: #f2f3f5; border-bottom-color: #e3e5e8; }
.light-mode .dm-search-bar input { background: #fff; color: #313338; }
.light-mode .dm-search-bar input::placeholder { color: #80848e; }
.light-mode .dm-search-count { color: #80848e; }
.light-mode .dm-search-bar button { color: #4e5058; }
.light-mode .dm-typing { color: #4e5058; }
.light-mode .dm-typing strong { color: #060607; }
.light-mode .dm-typing-dots span { background: #80848e; }
.light-mode .dm-code-block { background: #f2f3f5; border-color: #e3e5e8; color: #313338; }
.light-mode .dm-inline-code { background: #f2f3f5; border-color: #e3e5e8; color: #313338; }
.light-mode .dm-emoji-picker { background: #fff; border-color: #e3e5e8; }
.light-mode .dm-emoji-grid button:hover { background: #f2f3f5; }
.light-mode .dm-emoji-picker-header { border-bottom-color: #e3e5e8; }
.light-mode .dm-emoji-picker-header span { color: #4e5058; }

/* ══════════════════════════════════════════════════════════
   NOTIFICATION SETTINGS MODAL
   ══════════════════════════════════════════════════════════ */
.notif-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  animation: dropdown-in 0.15s ease;
}
.notif-modal {
  background: #313338;
  border-radius: 8px;
  width: 500px;
  max-width: 92vw;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  position: relative;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
}
.notif-modal-close {
  position: absolute;
  top: 12px;
  right: 12px;
  background: none;
  border: none;
  color: #72767d;
  font-size: 20px;
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: color 0.15s, background 0.15s;
}
.notif-modal-close:hover { color: #dbdee1; background: rgba(255,255,255,0.1); }
.notif-modal-title {
  color: #f2f3f5;
  font-size: 20px;
  font-weight: 700;
  padding: 20px 24px 0;
  margin: 0;
}
.notif-modal-body {
  flex: 1;
  overflow-y: auto;
  padding: 16px 24px;
  scrollbar-width: thin;
  scrollbar-color: #1a1b1e transparent;
}
.notif-modal-body::-webkit-scrollbar { width: 6px; }
.notif-modal-body::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 3px; }
.notif-modal-sep {
  height: 1px;
  background: #3f4147;
  margin: 16px 0;
}
.notif-modal-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 8px 0;
}
.notif-modal-row-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
  min-width: 0;
}
.notif-modal-row-label {
  color: #f2f3f5;
  font-size: 14px;
  font-weight: 500;
}
.notif-modal-row-desc {
  color: #b5bac1;
  font-size: 12px;
  line-height: 1.4;
}
.notif-modal-link {
  color: #00a8fc;
  font-size: 12px;
  text-decoration: none;
}
.notif-modal-link:hover { text-decoration: underline; }

/* Toggle switch */
.notif-toggle {
  width: 40px;
  height: 24px;
  background: #72767d;
  border: none;
  border-radius: 12px;
  position: relative;
  cursor: pointer;
  flex-shrink: 0;
  transition: background 0.2s;
  padding: 0;
}
.notif-toggle.active { background: #5865f2; }
.notif-toggle-knob {
  width: 18px;
  height: 18px;
  background: #fff;
  border-radius: 50%;
  position: absolute;
  top: 3px;
  left: 3px;
  transition: left 0.2s;
  pointer-events: none;
}
.notif-toggle.active .notif-toggle-knob { left: 19px; }

/* Radio buttons */
.notif-modal-section h3 {
  color: #f2f3f5;
  font-size: 14px;
  font-weight: 700;
  margin: 0 0 12px;
}
.notif-modal-section-desc {
  color: #b5bac1;
  font-size: 13px;
  margin: 0 0 8px;
}
.notif-radio {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 0;
  cursor: pointer;
  color: #dbdee1;
  font-size: 14px;
}
.notif-radio input[type="radio"] {
  display: none;
}
.notif-radio-custom {
  width: 20px;
  height: 20px;
  border: 2px solid #72767d;
  border-radius: 50%;
  flex-shrink: 0;
  position: relative;
  transition: border-color 0.15s;
}
.notif-radio input[type="radio"]:checked + .notif-radio-custom {
  border-color: #5865f2;
}
.notif-radio input[type="radio"]:checked + .notif-radio-custom::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 3px;
  width: 10px;
  height: 10px;
  background: #5865f2;
  border-radius: 50%;
}

/* Channel override */
.notif-modal-select {
  width: 100%;
  background: #1e1f22;
  border: 1px solid #3f4147;
  border-radius: 4px;
  color: #b5bac1;
  font-size: 14px;
  padding: 8px 12px;
  outline: none;
  margin-bottom: 12px;
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%2372767d' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 32px;
}
.notif-modal-select:focus { border-color: #5865f2; }
.notif-override-table {
  margin: 8px 0;
}
.notif-override-header {
  display: grid;
  grid-template-columns: 1fr auto auto auto auto;
  gap: 16px;
  padding: 6px 8px;
  color: #72767d;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}
.notif-override-row {
  display: grid;
  grid-template-columns: 1fr auto auto auto auto;
  gap: 16px;
  padding: 8px;
  align-items: center;
  color: #dbdee1;
  font-size: 13px;
  border-top: 1px solid #3f4147;
}
.notif-modal-section-hint {
  color: #72767d;
  font-size: 13px;
  margin: 8px 0 0;
  text-align: center;
}

/* Footer */
.notif-modal-footer {
  padding: 16px 24px;
  border-top: 1px solid #3f4147;
}
.notif-modal-done {
  width: 100%;
  background: #5865f2;
  border: none;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  padding: 10px 0;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s;
}
.notif-modal-done:hover { background: #4752c4; }

/* Light mode */
.light-mode .notif-modal { background: #fff; }
.light-mode .notif-modal-title { color: #060607; }
.light-mode .notif-modal-row-label { color: #060607; }
.light-mode .notif-modal-row-desc { color: #4e5058; }
.light-mode .notif-modal-sep { background: #e3e5e8; }
.light-mode .notif-modal-section h3 { color: #060607; }
.light-mode .notif-modal-section-desc { color: #4e5058; }
.light-mode .notif-radio { color: #313338; }
.light-mode .notif-radio-custom { border-color: #c4c9ce; }
.light-mode .notif-toggle { background: #c4c9ce; }
.light-mode .notif-toggle.active { background: #5865f2; }
.light-mode .notif-modal-select { background: #e3e5e8; border-color: #c4c9ce; color: #4e5058; }
.light-mode .notif-override-header { color: #5c5e66; }
.light-mode .notif-override-row { color: #313338; border-top-color: #e3e5e8; }
.light-mode .notif-modal-section-hint { color: #87898c; }
.light-mode .notif-modal-footer { border-top-color: #e3e5e8; }
.light-mode .notif-modal-close { color: #4e5058; }
.light-mode .notif-modal-close:hover { color: #060607; background: rgba(0,0,0,0.08); }

/* ══════════════════════════════════════════════════════════
   INVITE FRIENDS MODAL
   ══════════════════════════════════════════════════════════ */
.invite-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  animation: dropdown-in 0.15s ease;
}
.invite-modal {
  background: #313338;
  border-radius: 8px;
  width: 460px;
  max-width: 90vw;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  position: relative;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
}
.invite-modal-close {
  position: absolute;
  top: 12px;
  right: 12px;
  background: none;
  border: none;
  color: #72767d;
  font-size: 20px;
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: color 0.15s, background 0.15s;
}
.invite-modal-close:hover {
  color: #dbdee1;
  background: rgba(255, 255, 255, 0.1);
}
.invite-modal-header {
  padding: 20px 20px 0;
}
.invite-modal-header h2 {
  color: #f2f3f5;
  font-size: 18px;
  font-weight: 700;
  margin: 0 0 4px;
  padding-right: 32px;
}
.invite-modal-channel {
  color: #b5bac1;
  font-size: 12px;
  margin: 0;
}
.invite-modal-channel-tag {
  color: #00a8fc;
  font-weight: 600;
}
.invite-modal-search {
  padding: 16px 20px 8px;
  position: relative;
  display: flex;
  align-items: center;
}
.invite-modal-search svg {
  position: absolute;
  left: 32px;
  pointer-events: none;
}
.invite-modal-search input {
  width: 100%;
  background: #1e1f22;
  border: none;
  border-radius: 4px;
  padding: 8px 12px 8px 36px;
  color: #dbdee1;
  font-size: 14px;
  outline: none;
}
.invite-modal-search input::placeholder { color: #6d6f78; }
.invite-modal-search input:focus { box-shadow: 0 0 0 1px #5865f2; }
.invite-modal-notice {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px 20px;
  color: #b5bac1;
  font-size: 12px;
}
.invite-modal-notice-dot {
  color: #3ba55c;
  font-size: 10px;
  margin-top: 2px;
}
.invite-modal-list {
  flex: 1;
  overflow-y: auto;
  padding: 0 12px 4px;
  max-height: 300px;
  scrollbar-width: thin;
  scrollbar-color: #1a1b1e transparent;
}
.invite-modal-list::-webkit-scrollbar { width: 6px; }
.invite-modal-list::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 3px; }
.invite-modal-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 6px 8px;
  border-radius: 4px;
  transition: background 0.1s;
}
.invite-modal-row:hover { background: rgba(79, 84, 92, 0.3); }
.invite-modal-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}
.invite-modal-user-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
}
.invite-modal-displayname {
  color: #f2f3f5;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.invite-modal-username {
  color: #b5bac1;
  font-size: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.invite-modal-send {
  background: transparent;
  border: 1px solid #3ba55c;
  color: #3ba55c;
  font-size: 12px;
  font-weight: 600;
  padding: 5px 14px;
  border-radius: 3px;
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
  transition: background 0.15s, color 0.15s;
}
.invite-modal-send:hover {
  background: #3ba55c;
  color: #fff;
}
.invite-modal-send.sent {
  background: transparent;
  border-color: #72767d;
  color: #72767d;
  cursor: default;
}
.invite-modal-empty {
  text-align: center;
  color: #72767d;
  padding: 24px 0;
  font-size: 14px;
}
.invite-modal-footer {
  padding: 12px 20px 16px;
  border-top: 1px solid #3f4147;
}
.invite-modal-footer-label {
  color: #b5bac1;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  margin: 0 0 8px;
}
.invite-modal-link-row {
  display: flex;
  gap: 8px;
}
.invite-modal-link-row input {
  flex: 1;
  background: #1e1f22;
  border: none;
  border-radius: 4px;
  padding: 8px 12px;
  color: #dbdee1;
  font-size: 14px;
  outline: none;
  min-width: 0;
}
.invite-modal-copy {
  background: #5865f2;
  border: none;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  padding: 8px 20px;
  border-radius: 4px;
  cursor: pointer;
  white-space: nowrap;
  transition: background 0.15s;
}
.invite-modal-copy:hover { background: #4752c4; }
.invite-modal-copy.copied { background: #3ba55c; }
.invite-modal-expire {
  color: #72767d;
  font-size: 12px;
  margin: 8px 0 0;
}

/* Light mode */
.light-mode .invite-modal { background: #fff; }
.light-mode .invite-modal-header h2 { color: #060607; }
.light-mode .invite-modal-channel { color: #4e5058; }
.light-mode .invite-modal-search input { background: #e3e5e8; color: #313338; }
.light-mode .invite-modal-search input::placeholder { color: #87898c; }
.light-mode .invite-modal-notice { color: #4e5058; }
.light-mode .invite-modal-displayname { color: #060607; }
.light-mode .invite-modal-username { color: #5c5e66; }
.light-mode .invite-modal-empty { color: #5c5e66; }
.light-mode .invite-modal-footer { border-top-color: #e3e5e8; }
.light-mode .invite-modal-footer-label { color: #4e5058; }
.light-mode .invite-modal-link-row input { background: #e3e5e8; color: #313338; }
.light-mode .invite-modal-expire { color: #87898c; }
.light-mode .invite-modal-close { color: #4e5058; }
.light-mode .invite-modal-close:hover { color: #060607; background: rgba(0, 0, 0, 0.08); }

/* ══════════════════════════════════════════════════════════
   SELECT FRIENDS MODAL
   ══════════════════════════════════════════════════════════ */
.dm-select-friends-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  animation: fadeIn 0.15s ease;
}
.dm-select-friends-modal {
  background: #313338;
  border-radius: 8px;
  width: 440px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  position: relative;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  animation: modalSlideIn 0.2s ease;
}
.dm-select-friends-close {
  position: absolute;
  top: 12px;
  right: 12px;
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 20px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  z-index: 1;
}
.dm-select-friends-close:hover { color: #dbdee1; }

.dm-select-friends-header {
  padding: 20px 20px 0;
  text-align: center;
}
.dm-select-friends-header h2 {
  color: #f2f3f5;
  font-size: 20px;
  font-weight: 700;
  margin: 0 0 4px;
}
.dm-select-friends-header p {
  color: #949ba4;
  font-size: 12px;
  margin: 0;
}

.dm-select-friends-search {
  padding: 16px 20px 8px;
}
.dm-select-friends-search input {
  width: 100%;
  background: #1e1f22;
  border: none;
  border-radius: 4px;
  padding: 10px 12px;
  color: #dbdee1;
  font-size: 14px;
  outline: none;
  box-sizing: border-box;
}
.dm-select-friends-search input::placeholder { color: #6d6f78; }
.dm-select-friends-search input:focus { box-shadow: 0 0 0 1px #5865f2; }

.dm-select-friends-list {
  flex: 1;
  overflow-y: auto;
  padding: 4px 12px;
  max-height: 340px;
}
.dm-select-friends-list::-webkit-scrollbar { width: 6px; }
.dm-select-friends-list::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 3px; }

.dm-select-friends-empty {
  padding: 20px;
  color: #949ba4;
  font-size: 13px;
  text-align: center;
}

.dm-select-friends-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 8px 10px;
  border: none;
  border-radius: 4px;
  background: none;
  cursor: pointer;
  transition: background 0.1s;
  text-align: left;
  border-top: 1px solid #3f4147;
}
.dm-select-friends-item:first-child { border-top: none; }
.dm-select-friends-item:hover { background: #35373c; }

.dm-select-friends-item-left {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
}

.dm-select-friends-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  flex-shrink: 0;
  overflow: hidden;
}
.dm-select-friends-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.dm-select-friends-letter {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #5865f2;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 15px;
  font-weight: 600;
}

.dm-select-friends-info {
  display: flex;
  flex-direction: column;
  min-width: 0;
}
.dm-select-friends-name {
  color: #f2f3f5;
  font-size: 15px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.dm-select-friends-handle {
  color: #949ba4;
  font-size: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.dm-select-friends-check {
  width: 22px;
  height: 22px;
  border-radius: 4px;
  border: 2px solid #4e5058;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: background 0.1s, border-color 0.1s;
}
.dm-select-friends-check.checked {
  background: #5865f2;
  border-color: #5865f2;
}

.dm-select-friends-actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 12px;
  padding: 16px 20px;
  background: #2b2d31;
  border-radius: 0 0 8px 8px;
}
.dm-select-friends-cancel {
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 14px;
  cursor: pointer;
  padding: 8px 16px;
  border-radius: 4px;
}
.dm-select-friends-cancel:hover { text-decoration: underline; color: #dbdee1; }
.dm-select-friends-create {
  background: #5865f2;
  border: none;
  color: #fff;
  font-size: 14px;
  font-weight: 500;
  padding: 10px 24px;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s;
}
.dm-select-friends-create:hover { background: #4752c4; }
.dm-select-friends-create:disabled { opacity: 0.5; cursor: not-allowed; }

/* Select Friends light mode */
.light-mode .dm-select-friends-modal { background: #fff; }
.light-mode .dm-select-friends-close { color: #4e5058; }
.light-mode .dm-select-friends-close:hover { color: #060607; }
.light-mode .dm-select-friends-header h2 { color: #060607; }
.light-mode .dm-select-friends-header p { color: #80848e; }
.light-mode .dm-select-friends-search input { background: #e3e5e8; color: #313338; }
.light-mode .dm-select-friends-search input::placeholder { color: #80848e; }
.light-mode .dm-select-friends-empty { color: #80848e; }
.light-mode .dm-select-friends-item { border-top-color: #e3e5e8; }
.light-mode .dm-select-friends-item:hover { background: #f2f3f5; }
.light-mode .dm-select-friends-name { color: #060607; }
.light-mode .dm-select-friends-handle { color: #80848e; }
.light-mode .dm-select-friends-check { border-color: #c4c9ce; }
.light-mode .dm-select-friends-actions { background: #f2f3f5; }
.light-mode .dm-select-friends-cancel { color: #5c5e66; }
.light-mode .dm-select-friends-cancel:hover { color: #060607; }

/* ══════════════════════════════════════════════════════════
   DM FRIENDS PAGE (Discord-style)
   ══════════════════════════════════════════════════════════ */
.dmf-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: #313338;
}

/* ── Header bar ── */
.dmf-header {
  display: flex;
  align-items: center;
  height: 48px;
  padding: 0 16px;
  border-bottom: 1px solid #1f2023;
  flex-shrink: 0;
}
.dmf-header-left {
  display: flex;
  align-items: center;
  gap: 0;
}
.dmf-header-icon {
  color: #b5bac1;
  margin-right: 8px;
}
.dmf-header-title {
  color: #f2f3f5;
  font-size: 16px;
  font-weight: 700;
  margin-right: 8px;
  white-space: nowrap;
}
.dmf-header-divider {
  width: 1px;
  height: 24px;
  background: #3f4147;
  margin: 0 12px 0 4px;
}
.dmf-tab {
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 14px;
  font-weight: 500;
  padding: 4px 10px;
  border-radius: 4px;
  cursor: pointer;
  white-space: nowrap;
  position: relative;
  transition: background 0.15s, color 0.15s;
}
.dmf-tab:hover { background: #35373c; color: #dbdee1; }
.dmf-tab.active { background: #404249; color: #f2f3f5; }
.dmf-tab-add {
  background: #248046 !important;
  color: #fff !important;
}
.dmf-tab-add:hover { background: #1a6334 !important; }
.dmf-tab-add.active { background: transparent !important; color: #2dc770 !important; border: none; }
.dmf-tab-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 16px;
  height: 16px;
  padding: 0 5px;
  border-radius: 8px;
  background: #f23f42;
  color: #fff;
  font-size: 11px;
  font-weight: 700;
  margin-left: 6px;
}

/* ── Body (content + active now sidebar) ── */
.dmf-body {
  display: flex;
  flex: 1;
  overflow: hidden;
}
.dmf-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  padding: 0;
}

/* ── Search bar ── */
.dmf-search {
  padding: 16px 20px 8px;
  position: relative;
}
.dmf-search input {
  width: 100%;
  background: #1e1f22;
  border: none;
  border-radius: 4px;
  padding: 8px 32px 8px 10px;
  color: #dbdee1;
  font-size: 14px;
  outline: none;
  box-sizing: border-box;
}
.dmf-search input::placeholder { color: #6d6f78; }
.dmf-search-icon {
  position: absolute;
  right: 30px;
  top: 50%;
  transform: translateY(-50%);
  color: #6d6f78;
  margin-top: 4px;
  pointer-events: none;
}

/* ── Section count header ── */
.dmf-section-header {
  padding: 16px 20px 8px;
  color: #949ba4;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

/* ── Friend list ── */
.dmf-list {
  flex: 1;
  overflow-y: auto;
  padding: 0 12px 8px;
}
.dmf-list::-webkit-scrollbar { width: 6px; }
.dmf-list::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 3px; }

.dmf-empty {
  padding: 32px 20px;
  text-align: center;
  color: #949ba4;
  font-size: 14px;
}

/* ── Friend row ── */
.dmf-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 10px;
  border-top: 1px solid #3b3d44;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.1s;
}
.dmf-row:first-child { border-top: none; }
.dmf-row:hover { background: #35373c; }

.dmf-row-left {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
}

.dmf-row-avatar {
  position: relative;
  width: 36px;
  height: 36px;
  flex-shrink: 0;
}
.dmf-row-avatar img {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
}
.dmf-row-letter {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #5865f2;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 15px;
  font-weight: 600;
}
.dmf-row-status-dot {
  position: absolute;
  bottom: -1px;
  right: -1px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: 3px solid #313338;
  box-sizing: content-box;
}
.dmf-row-status-dot.online { background: #23a55a; }
.dmf-row-status-dot.idle { background: #f0b232; }
.dmf-row-status-dot.dnd { background: #f23f42; }
.dmf-row-status-dot.offline { background: #80848e; }
.dmf-row:hover .dmf-row-status-dot { border-color: #35373c; }

.dmf-row-info {
  display: flex;
  flex-direction: column;
  min-width: 0;
}
.dmf-row-name {
  color: #f2f3f5;
  font-size: 15px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.dmf-row-status-text {
  color: #949ba4;
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.dmf-row-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.dmf-action-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #2b2d31;
  border: none;
  color: #b5bac1;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: color 0.15s, background 0.15s;
}
.dmf-action-btn:hover { color: #dbdee1; background: #404249; }
.dmf-action-btn.accept { color: #23a55a; }
.dmf-action-btn.accept:hover { color: #fff; background: #23a55a; }
.dmf-action-btn.decline { color: #f23f42; }
.dmf-action-btn.decline:hover { color: #fff; background: #f23f42; }

/* ── Add Friend tab ── */
.dmf-add-friend-tab {
  padding: 24px 20px;
  border-bottom: 1px solid #3f4147;
}
.dmf-add-friend-tab h3 {
  color: #f2f3f5;
  font-size: 16px;
  font-weight: 700;
  margin: 0 0 4px;
  text-transform: uppercase;
}
.dmf-add-friend-tab > p {
  color: #b5bac1;
  font-size: 14px;
  margin: 0 0 16px;
}
.dmf-add-input-row {
  display: flex;
  align-items: center;
  gap: 0;
  background: #1e1f22;
  border-radius: 8px;
  padding: 4px 4px 4px 12px;
  border: 1px solid #1e1f22;
  transition: border-color 0.15s;
}
.dmf-add-input-row:focus-within { border-color: #5865f2; }
.dmf-add-input-row input {
  flex: 1;
  background: none;
  border: none;
  color: #dbdee1;
  font-size: 14px;
  outline: none;
  padding: 8px 0;
}
.dmf-add-input-row input::placeholder { color: #6d6f78; }
.dmf-add-send-btn {
  background: #5865f2;
  border: none;
  color: #fff;
  font-size: 13px;
  font-weight: 600;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
  white-space: nowrap;
  transition: background 0.15s;
}
.dmf-add-send-btn:hover { background: #4752c4; }
.dmf-add-send-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.dmf-add-status {
  margin: 12px 0 0;
  font-size: 14px;
}
.dmf-add-status.success { color: #23a55a; }
.dmf-add-status.error { color: #f23f42; }

/* ── Active Now sidebar ── */
.dmf-active-sidebar {
  width: 340px;
  flex-shrink: 0;
  border-left: 1px solid #1f2023;
  padding: 16px;
  overflow-y: auto;
}
.dmf-active-sidebar h3 {
  color: #f2f3f5;
  font-size: 14px;
  font-weight: 700;
  margin: 0 0 16px;
}
.dmf-active-empty {
  text-align: center;
  padding: 20px 0;
}
.dmf-active-empty p {
  color: #b5bac1;
  font-size: 14px;
  margin: 0 0 4px;
  font-weight: 600;
}
.dmf-active-empty span {
  color: #949ba4;
  font-size: 13px;
}

.dmf-active-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.dmf-active-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px;
  border-radius: 8px;
  cursor: pointer;
}
.dmf-active-item:hover { background: #35373c; }

.dmf-active-avatar {
  position: relative;
  width: 32px;
  height: 32px;
  flex-shrink: 0;
}
.dmf-active-avatar img {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}
.dmf-active-letter {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: #5865f2;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 600;
}
.dmf-active-dot {
  position: absolute;
  bottom: -2px;
  right: -2px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #23a55a;
  border: 3px solid #313338;
  box-sizing: content-box;
}
.dmf-active-info {
  display: flex;
  flex-direction: column;
  min-width: 0;
}
.dmf-active-name {
  color: #f2f3f5;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.dmf-active-status {
  color: #23a55a;
  font-size: 12px;
}

/* ── Context menu ── */
.dmf-context-menu {
  position: fixed;
  z-index: 9999;
  background: #111214;
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
  min-width: 160px;
}
.dmf-context-menu button {
  display: block;
  width: 100%;
  text-align: left;
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 14px;
  padding: 8px 10px;
  border-radius: 4px;
  cursor: pointer;
}
.dmf-context-menu button:hover { background: #5865f2; color: #fff; }

/* ── DmFriends light mode ── */
.light-mode .dmf-container { background: #fff; }
.light-mode .dmf-header { border-bottom-color: #e3e5e8; }
.light-mode .dmf-header-icon { color: #4e5058; }
.light-mode .dmf-header-title { color: #060607; }
.light-mode .dmf-header-divider { background: #e3e5e8; }
.light-mode .dmf-tab { color: #4e5058; }
.light-mode .dmf-tab:hover { background: #ebedef; color: #060607; }
.light-mode .dmf-tab.active { background: #e3e5e8; color: #060607; }
.light-mode .dmf-search input { background: #e3e5e8; color: #313338; }
.light-mode .dmf-search input::placeholder { color: #80848e; }
.light-mode .dmf-search-icon { color: #80848e; }
.light-mode .dmf-section-header { color: #5c5e66; }
.light-mode .dmf-row { border-top-color: #ebedef; }
.light-mode .dmf-row:hover { background: #f2f3f5; }
.light-mode .dmf-row-name { color: #060607; }
.light-mode .dmf-row-status-text { color: #80848e; }
.light-mode .dmf-row-status-dot { border-color: #fff; }
.light-mode .dmf-row:hover .dmf-row-status-dot { border-color: #f2f3f5; }
.light-mode .dmf-action-btn { background: #ebedef; color: #4e5058; }
.light-mode .dmf-action-btn:hover { background: #d3d5d9; color: #060607; }
.light-mode .dmf-add-friend-tab { border-bottom-color: #e3e5e8; }
.light-mode .dmf-add-friend-tab h3 { color: #060607; }
.light-mode .dmf-add-friend-tab > p { color: #5c5e66; }
.light-mode .dmf-add-input-row { background: #e3e5e8; border-color: #e3e5e8; }
.light-mode .dmf-add-input-row input { color: #313338; }
.light-mode .dmf-add-input-row input::placeholder { color: #80848e; }
.light-mode .dmf-active-sidebar { border-left-color: #e3e5e8; }
.light-mode .dmf-active-sidebar h3 { color: #060607; }
.light-mode .dmf-active-empty p { color: #5c5e66; }
.light-mode .dmf-active-empty span { color: #80848e; }
.light-mode .dmf-active-item:hover { background: #f2f3f5; }
.light-mode .dmf-active-name { color: #060607; }
.light-mode .dmf-active-dot { border-color: #fff; }
.light-mode .dmf-context-menu { background: #fff; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15); }
.light-mode .dmf-context-menu button { color: #313338; }
.light-mode .dmf-context-menu button:hover { background: #5865f2; color: #fff; }

/* ══════════════════════════════════════════════════════════
   DM DISCOVER PAGE (Discord-style)
   ══════════════════════════════════════════════════════════ */
.dmd-container {
  display: flex;
  height: 100%;
  background: #313338;
}

/* ── Left sidebar ── */
.dmd-sidebar {
  width: 220px;
  flex-shrink: 0;
  background: #2b2d31;
  display: flex;
  flex-direction: column;
  padding: 12px 0;
  border-right: 1px solid #1f2023;
}
.dmd-sidebar-title {
  color: #f2f3f5;
  font-size: 18px;
  font-weight: 800;
  padding: 8px 16px 16px;
  margin: 0;
}
.dmd-sidebar-nav {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 0 8px;
}
.dmd-sidebar-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: 6px;
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
}
.dmd-sidebar-item:hover { background: #35373c; color: #dbdee1; }
.dmd-sidebar-item.active { background: #404249; color: #f2f3f5; }

/* ── Main content area ── */
.dmd-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* ── Top category bar ── */
.dmd-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 48px;
  padding: 0 16px;
  border-bottom: 1px solid #1f2023;
  flex-shrink: 0;
}
.dmd-topbar-left {
  display: flex;
  align-items: center;
  gap: 0;
}
.dmd-topbar-icon {
  color: #b5bac1;
  margin-right: 12px;
}
.dmd-cat-tab {
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 14px;
  font-weight: 500;
  padding: 4px 10px;
  border-radius: 4px;
  cursor: pointer;
  white-space: nowrap;
  transition: background 0.15s, color 0.15s;
}
.dmd-cat-tab:hover { background: #35373c; color: #dbdee1; }
.dmd-cat-tab.active { background: #404249; color: #f2f3f5; }

.dmd-topbar-right {
  flex-shrink: 0;
}
.dmd-topbar-search {
  position: relative;
  display: flex;
  align-items: center;
}
.dmd-topbar-search svg {
  position: absolute;
  left: 8px;
  color: #6d6f78;
  pointer-events: none;
}
.dmd-topbar-search input {
  background: #1e1f22;
  border: none;
  border-radius: 4px;
  padding: 6px 10px 6px 28px;
  color: #dbdee1;
  font-size: 13px;
  outline: none;
  width: 180px;
}
.dmd-topbar-search input::placeholder { color: #6d6f78; }
.dmd-topbar-search input:focus { box-shadow: 0 0 0 1px #5865f2; }

/* ── Scrollable body ── */
.dmd-scroll {
  flex: 1;
  overflow-y: auto;
}
.dmd-scroll::-webkit-scrollbar { width: 8px; }
.dmd-scroll::-webkit-scrollbar-thumb { background: #1a1b1e; border-radius: 4px; }

/* ── Hero banner ── */
.dmd-hero {
  position: relative;
  background: linear-gradient(135deg, #5865f2 0%, #4752c4 50%, #2b2d31 100%);
  padding: 60px 40px 56px;
  min-height: 120px;
  overflow: hidden;
}
.dmd-hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  pointer-events: none;
}
.dmd-hero-text {
  position: relative;
  z-index: 1;
  text-align: center;
}
.dmd-hero-text h1 {
  color: #fff;
  font-size: 36px;
  font-weight: 900;
  margin: 0 0 10px;
  line-height: 1.15;
  letter-spacing: 0.04em;
  text-transform: uppercase;
}
.dmd-hero-text p {
  color: rgba(255, 255, 255, 0.75);
  font-size: 16px;
  margin: 0;
}

/* ── Section ── */
.dmd-section {
  padding: 24px 32px 40px;
}
.dmd-section-title {
  color: #f2f3f5;
  font-size: 20px;
  font-weight: 700;
  margin: 0 0 20px;
}

.dmd-loading {
  text-align: center;
  color: #949ba4;
  font-size: 14px;
  padding: 40px 20px;
}

/* ── Server card grid ── */
.dmd-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 18px;
}
@media (max-width: 1400px) { .dmd-grid { grid-template-columns: repeat(3, 1fr); } }
@media (max-width: 1000px) { .dmd-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 650px) { .dmd-grid { grid-template-columns: 1fr; } }

.dmd-card {
  background: #2b2d31;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  transition: box-shadow 0.2s, transform 0.15s;
}
.dmd-card:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
  transform: translateY(-2px);
}

.dmd-card-cover {
  position: relative;
  height: 143px;
  overflow: hidden;
  background: #1e1f22;
}
.dmd-card-cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.dmd-card-cover-fallback {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #5865f2 0%, #3a45b0 100%);
}

.dmd-card-avatar {
  position: absolute;
  bottom: -16px;
  left: 16px;
  width: 48px;
  height: 48px;
  border-radius: 16px;
  overflow: hidden;
  border: 4px solid #2b2d31;
  background: #313338;
}
.dmd-card-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.dmd-card-avatar-letter {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #5865f2;
  color: #fff;
  font-size: 20px;
  font-weight: 700;
}

.dmd-card-body {
  padding: 24px 16px 14px;
}
.dmd-card-name {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 4px;
}
.dmd-card-online-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #23a55a;
  flex-shrink: 0;
}
.dmd-card-name span:last-child {
  color: #f2f3f5;
  font-size: 15px;
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.dmd-card-desc {
  color: #949ba4;
  font-size: 13px;
  margin: 0 0 10px;
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.dmd-card-meta {
  display: flex;
  align-items: center;
  gap: 12px;
}
.dmd-card-meta-online,
.dmd-card-meta-members {
  display: flex;
  align-items: center;
  gap: 5px;
  color: #949ba4;
  font-size: 12px;
}
.dmd-meta-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}
.dmd-meta-dot.online { background: #23a55a; }
.dmd-meta-dot.members { background: #949ba4; }

/* ── DmDiscover light mode ── */
.light-mode .dmd-container { background: #fff; }
.light-mode .dmd-sidebar { background: #f2f3f5; border-right-color: #e3e5e8; }
.light-mode .dmd-sidebar-title { color: #060607; }
.light-mode .dmd-sidebar-item { color: #4e5058; }
.light-mode .dmd-sidebar-item:hover { background: #ebedef; color: #060607; }
.light-mode .dmd-sidebar-item.active { background: #d4d7dc; color: #060607; }
.light-mode .dmd-topbar { border-bottom-color: #e3e5e8; }
.light-mode .dmd-topbar-icon { color: #4e5058; }
.light-mode .dmd-cat-tab { color: #4e5058; }
.light-mode .dmd-cat-tab:hover { background: #ebedef; color: #060607; }
.light-mode .dmd-cat-tab.active { background: #e3e5e8; color: #060607; }
.light-mode .dmd-topbar-search input { background: #e3e5e8; color: #313338; }
.light-mode .dmd-topbar-search input::placeholder { color: #80848e; }
.light-mode .dmd-topbar-search svg { color: #80848e; }
.light-mode .dmd-hero { background: linear-gradient(135deg, #5865f2 0%, #4752c4 40%, #f2f3f5 100%); }
.light-mode .dmd-section-title { color: #060607; }
.light-mode .dmd-loading { color: #80848e; }
.light-mode .dmd-card { background: #f2f3f5; }
.light-mode .dmd-card:hover { box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12); }
.light-mode .dmd-card-cover { background: #e3e5e8; }
.light-mode .dmd-card-avatar { border-color: #f2f3f5; background: #fff; }
.light-mode .dmd-card-name span:last-child { color: #060607; }
.light-mode .dmd-card-desc { color: #5c5e66; }
.light-mode .dmd-card-meta-online,
.light-mode .dmd-card-meta-members { color: #5c5e66; }

/* ══════════════════════════════════════════════════════════
   RESPONSIVE BREAKPOINTS
   ══════════════════════════════════════════════════════════ */

/* Tablet: collapse member sidebar column */
@media (max-width: 1100px) {
  .discord-server {
    grid-template-columns: 240px 1fr 0;
  }
  .discord-server > div:last-child {
    display: none;
  }
}

/* ══════════════════════════════════════════════════════════
   MOBILE LAYOUT (≤768px)  — Discord-mobile style
   ══════════════════════════════════════════════════════════ */

/* --- Hamburger button --- */
.mobile-hamburger {
  display: none;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: #b5bac1;
  width: 40px;
  height: 40px;
  border-radius: 8px;
  cursor: pointer;
  flex-shrink: 0;
  padding: 0;
  margin-right: 4px;
  -webkit-tap-highlight-color: transparent;
}
.mobile-hamburger:hover { background: #2b2d31; color: #f2f3f5; }

/* --- Members toggle (mobile top-right) --- */
.mobile-members-toggle {
  display: none;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: #b5bac1;
  width: 40px;
  height: 40px;
  border-radius: 8px;
  cursor: pointer;
  flex-shrink: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
}
.mobile-members-toggle:hover { background: #2b2d31; color: #f2f3f5; }

/* --- Overlay backdrop for mobile drawers --- */
.mobile-overlay-backdrop {
  display: none;
}

/* --- Mobile members drawer wrapper --- */
.mobile-members-drawer {
  display: contents;
}

@media (max-width: 768px) {
  /* Show mobile-only buttons */
  .mobile-hamburger,
  .mobile-members-toggle {
    display: flex;
  }

  /* Topbar adjustments */
  .discord-topbar {
    padding: 0 8px;
    height: 48px;
    min-height: 48px;
    gap: 4px;
  }
  .discord-topbar-logo {
    gap: 4px;
    font-size: 14px;
  }
  .discord-topbar-logo-img {
    width: 26px;
    height: 26px;
  }
  .discord-topbar-center {
    flex: 1;
    min-width: 0;
  }
  .discord-topbar-group-name {
    font-size: 13px;
    max-width: 160px;
  }

  /* Backdrop */
  .mobile-overlay-backdrop {
    display: block;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 200;
    -webkit-tap-highlight-color: transparent;
  }

  /* ──── GUILD BAR: slide-in from left ──── */
  .discord-guild-bar {
    position: fixed;
    left: 0;
    top: 48px;
    bottom: 0;
    z-index: 210;
    transform: translateX(-100%);
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    width: 72px;
    min-width: 72px;
  }
  .mobile-sidebar-open .discord-guild-bar {
    transform: translateX(0);
  }

  /* ──── SIDEBAR: slide-in from left, attached to guild bar ──── */
  .discord-sidebar {
    position: fixed;
    left: 72px;
    top: 48px;
    bottom: 0;
    width: 260px;
    z-index: 210;
    transform: translateX(calc(-100% - 72px));
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
    border-right: 1px solid #1e1f22;
  }
  .mobile-sidebar-open .discord-sidebar,
  .mobile-sidebar-open .discord-dm-sidebar {
    transform: translateX(0);
  }

  /* ──── MAIN CONTENT: full width ──── */
  .discord-server {
    grid-template-columns: 1fr !important;
    flex: 1;
    overflow: hidden;
  }
  /* Hide sidebar and member column from grid flow on mobile */
  .discord-server > .discord-sidebar {
    position: fixed;
    /* already positioned above */
  }
  .discord-main {
    grid-column: 1 / -1;
    min-height: 0;
  }

  /* ──── MEMBER SIDEBAR: slide-in from right ──── */
  .mobile-members-drawer {
    display: block;
    position: fixed;
    right: 0;
    top: 48px;
    bottom: 0;
    width: 280px;
    z-index: 210;
    background: #2b2d31;
    overflow-y: auto;
    transform: translateX(100%);
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    border-left: 1px solid #1e1f22;
  }
  .mobile-members-drawer.open {
    transform: translateX(0);
  }
  /* When member sidebar is shown via the mobile drawer, override its desktop display */
  .mobile-members-drawer .member-sidebar {
    display: flex !important;
    width: 100% !important;
    position: static;
    height: 100%;
    border-left: none;
  }

  /* ──── DM Layout mobile ──── */
  .discord-dm-layout {
    grid-template-columns: 1fr !important;
  }
  .discord-dm-sidebar {
    position: fixed;
    left: 72px;
    top: 48px;
    bottom: 0;
    width: 260px;
    z-index: 210;
    transform: translateX(calc(-100% - 72px));
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
  }

  /* ──── Touch targets ──── */
  .discord-channel {
    min-height: 44px;
    padding: 8px 12px;
    font-size: 14px;
  }
  .discord-category-header {
    min-height: 40px;
    padding: 8px 12px;
  }
  .discord-nav-item {
    min-height: 44px;
    padding: 8px 12px;
    font-size: 14px;
  }
  .guild-icon {
    width: 44px;
    height: 44px;
  }
  .guild-home img {
    width: 24px;
    height: 24px;
  }

  /* ──── Server header on mobile ──── */
  .discord-server-header {
    min-height: 44px;
    padding: 8px 12px;
  }

  /* ──── Modals / Settings full-screen on mobile ──── */
  .discord-modal-overlay .discord-channel-settings,
  .discord-modal-overlay .discord-category-perms-modal,
  .discord-modal-overlay .discord-channel-perms-modal {
    width: 100vw !important;
    max-width: 100vw !important;
    height: 100vh !important;
    max-height: 100vh !important;
    border-radius: 0 !important;
    margin: 0 !important;
  }

  /* ──── About / Admin / Roles panels ──── */
  .discord-about-grid { grid-template-columns: 1fr; }
  .discord-appearance-row { flex-direction: column; }

  /* ──── Server dropdown ──── */
  .discord-server-dropdown {
    left: 8px !important;
    width: calc(100vw - 16px) !important;
    max-width: 300px;
  }

  /* ──── Context menus ──── */
  .discord-context-menu {
    max-width: calc(100vw - 16px);
  }

  /* ──── Join screen ──── */
  .discord-join-card { padding: 32px 20px; }

  /* ──── Invite modal ──── */
  .discord-invite-modal {
    width: calc(100vw - 32px) !important;
    max-width: 400px;
  }

  /* ──── Events sidebar widget ──── */
  .discord-events-sidebar-widget {
    display: none;
  }

  /* ──── Forum layout ──── */
  .discord-forum-header { flex-direction: column; gap: 8px; }
  .discord-forum-tags-bar { flex-wrap: wrap; }
  .discord-forum-grid { grid-template-columns: 1fr; }
}

/* Extra-small phones */
@media (max-width: 480px) {
  .discord-topbar { padding: 0 4px; }
  .discord-topbar-logo-img { width: 22px; height: 22px; }
  .discord-topbar-group-name { max-width: 120px; font-size: 12px; }
  .discord-sidebar { width: 220px; left: 72px; }
  .discord-dm-sidebar { width: 220px; left: 72px; }
  .mobile-members-drawer { width: 260px; }
  .discord-join-card { padding: 24px 16px; }
  .discord-join-card h1 { font-size: 20px; }
}

/* ========================================
   Channel Settings Modal
   ======================================== */
.discord-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.discord-channel-settings {
  display: flex;
  width: 840px;
  max-width: 96vw;
  height: 600px;
  max-height: 90vh;
  background: #313338;
  border-radius: 8px;
  overflow: hidden;
  animation: fadeInScale 0.2s ease;
}

@keyframes fadeInScale {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

.discord-cs-sidebar {
  width: 218px;
  min-width: 218px;
  background: #2b2d31;
  padding: 60px 8px 16px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.discord-cs-sidebar-header {
  color: #b5bac1;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  padding: 6px 10px;
  margin-bottom: 4px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.discord-cs-sidebar-item {
  background: none;
  border: none;
  color: #b5bac1;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
  text-align: left;
  font-size: 14px;
  font-weight: 500;
}
.discord-cs-sidebar-item:hover { background: #35373c; color: #dbdee1; }
.discord-cs-sidebar-item.active { background: #404249; color: #fff; }
.discord-cs-sidebar-item.danger { color: #f23f43; }
.discord-cs-sidebar-item.danger:hover { background: #f23f43; color: #fff; }

.discord-cs-sidebar-sep {
  height: 1px;
  background: #3f4147;
  margin: 8px 10px;
}

.discord-cs-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.discord-cs-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 20px 0;
}
.discord-cs-header h2 {
  color: #f2f3f5;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.discord-cs-close {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  padding: 4px;
  border-radius: 50%;
  display: flex;
}
.discord-cs-close:hover { color: #f2f3f5; background: #404249; }

.discord-cs-body {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.discord-cs-field label {
  display: block;
  color: #b5bac1;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  margin-bottom: 8px;
}

.discord-cs-field input[type="text"],
.discord-cs-field textarea,
.discord-cs-field select {
  width: 100%;
  background: #1e1f22;
  border: none;
  border-radius: 3px;
  color: #dbdee1;
  padding: 10px;
  font-size: 14px;
  font-family: inherit;
  resize: vertical;
  box-sizing: border-box;
}
.discord-cs-field input:focus,
.discord-cs-field textarea:focus,
.discord-cs-field select:focus {
  outline: none;
  box-shadow: 0 0 0 1px #5865f2;
}

.discord-cs-name-input {
  display: flex;
  align-items: center;
  gap: 8px;
  background: #1e1f22;
  border-radius: 3px;
  padding: 0 10px;
}
.discord-cs-name-input input {
  background: transparent !important;
  padding-left: 0 !important;
}

.discord-cs-charcount {
  display: block;
  text-align: right;
  color: #72767d;
  font-size: 12px;
  margin-top: 4px;
}

.discord-cs-field-desc {
  color: #b5bac1;
  font-size: 13px;
  margin: 0 0 8px;
  font-weight: 400;
}

.discord-cs-toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.discord-cs-toggle {
  width: 40px;
  min-width: 40px;
  height: 24px;
  background: #72767d;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  position: relative;
  transition: background 0.2s;
}
.discord-cs-toggle.active { background: #23a559; }
.discord-cs-toggle-knob {
  position: absolute;
  top: 3px;
  left: 3px;
  width: 18px;
  height: 18px;
  background: #fff;
  border-radius: 50%;
  transition: left 0.2s;
}
.discord-cs-toggle.active .discord-cs-toggle-knob { left: 19px; }

.discord-cs-perms-info {
  display: flex;
  gap: 12px;
  padding: 16px;
  background: #2b2d31;
  border-radius: 8px;
  color: #b5bac1;
  font-size: 14px;
}
.discord-cs-perms-info svg { flex-shrink: 0; color: #5865f2; margin-top: 2px; }
.discord-cs-perms-info p { margin: 0; }

.discord-cs-perms-placeholder {
  text-align: center;
  color: #72767d;
  padding: 40px 20px;
}

.discord-cs-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 16px 20px;
  background: #2b2d31;
}

.discord-cs-cancel {
  background: none;
  border: none;
  color: #b5bac1;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  border-radius: 3px;
}
.discord-cs-cancel:hover { text-decoration: underline; }

.discord-cs-save {
  background: #5865f2;
  border: none;
  color: #fff;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  border-radius: 3px;
}
.discord-cs-save:hover { background: #4752c4; }
.discord-cs-save:disabled { opacity: 0.5; cursor: not-allowed; }

/* ========================================
   Right-Click Context Menu
   ======================================== */
.discord-context-menu {
  position: fixed;
  background: #111214;
  border-radius: 4px;
  padding: 6px 8px;
  min-width: 188px;
  z-index: 10000;
  box-shadow: 0 8px 16px rgba(0,0,0,0.24);
  animation: fadeInContext 0.1s ease;
}

@keyframes fadeInContext {
  from { opacity: 0; transform: translateY(-4px); }
  to { opacity: 1; transform: translateY(0); }
}

.discord-context-menu button {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 8px;
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 14px;
  cursor: pointer;
  border-radius: 2px;
  text-align: left;
}
.discord-context-menu button:hover { background: #5865f2; color: #fff; }
.discord-context-menu button:hover svg { fill: #fff; }
.discord-context-menu button svg { flex-shrink: 0; }

.discord-context-danger { color: #f23f43 !important; }
.discord-context-danger:hover { background: #f23f43 !important; color: #fff !important; }

.discord-context-sep {
  height: 1px;
  background: #2e2f34;
  margin: 4px;
}

/* ========================================
   Create Channel Modal (enhanced)
   ======================================== */
.discord-create-channel-modal h4 {
  color: #f2f3f5;
  font-size: 16px;
  font-weight: 600;
  margin: 0 0 12px;
}

.discord-create-label {
  display: block;
  color: #b5bac1;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  margin: 12px 0 8px;
}

.discord-channel-type-picker {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 4px;
}

.discord-channel-type-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: #2b2d31;
  border-radius: 4px;
  cursor: pointer;
  border: 2px solid transparent;
  transition: border-color 0.15s;
}
.discord-channel-type-option:hover { background: #35373c; }
.discord-channel-type-option.selected { background: #35373c; border-color: #5865f2; }

.discord-channel-type-icon {
  color: #b5bac1;
  font-size: 20px;
  font-weight: 700;
  width: 24px;
  text-align: center;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.discord-channel-type-icon svg { fill: #b5bac1; }

.discord-channel-type-title {
  color: #f2f3f5;
  font-size: 14px;
  font-weight: 600;
}

.discord-channel-type-desc {
  color: #b5bac1;
  font-size: 12px;
  margin-top: 2px;
}

.discord-channel-type-radio {
  margin-left: auto;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 2px solid #72767d;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.discord-channel-type-radio.checked {
  border-color: #5865f2;
}
.discord-channel-type-radio.checked::after {
  content: '';
  width: 10px;
  height: 10px;
  background: #5865f2;
  border-radius: 50%;
}

.discord-create-channel-name-row {
  display: flex;
  align-items: center;
  gap: 6px;
  background: #1e1f22;
  border-radius: 4px;
  padding: 0 8px;
}
.discord-create-channel-name-row input {
  background: transparent !important;
  border: none !important;
  flex: 1;
}

/* ========================================
   Category Rename / Add Button
   ======================================== */
.discord-category-rename-input {
  background: #1e1f22;
  border: none;
  color: #fff;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  padding: 6px;
  width: 100%;
  border-radius: 3px;
  box-sizing: border-box;
}
.discord-category-rename-input:focus { outline: 1px solid #5865f2; }

.discord-category-editing {
  padding: 0 8px;
}

.discord-category-add {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  padding: 2px;
  margin-left: auto;
  display: flex;
  opacity: 0;
  transition: opacity 0.15s;
}
.discord-category-header:hover .discord-category-add { opacity: 1; }
.discord-category-add:hover { color: #dbdee1; }

/* Channel type icon styling */
.channel-type-icon {
  flex-shrink: 0;
  color: #80848e;
  margin-right: 6px;
}

.discord-channel.nsfw .discord-channel-name::after {
  content: 'NSFW';
  font-size: 9px;
  background: #f23f43;
  color: #fff;
  padding: 1px 4px;
  border-radius: 3px;
  margin-left: 6px;
  font-weight: 700;
}

/* ========================================
   Pinned Messages Panel (enhanced)
   ======================================== */
.channel-pinned-msg {
  display: flex;
  gap: 12px;
  padding: 12px;
  border-bottom: 1px solid #3f4147;
  position: relative;
}
.channel-pinned-msg:last-child { border-bottom: none; }

.channel-pinned-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  flex-shrink: 0;
  object-fit: cover;
}

.channel-pinned-msg-body {
  flex: 1;
  min-width: 0;
}

.channel-pinned-msg-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.channel-pinned-username {
  color: #f2f3f5;
  font-weight: 600;
  font-size: 14px;
}

.channel-pinned-time {
  color: #72767d;
  font-size: 12px;
}

.channel-pinned-msg-text {
  color: #dbdee1;
  font-size: 14px;
  word-break: break-word;
}

.channel-pinned-msg-image {
  max-width: 200px;
  max-height: 150px;
  border-radius: 4px;
  margin-top: 6px;
}

.channel-pinned-unpin {
  background: none;
  border: none;
  color: #b5bac1;
  cursor: pointer;
  padding: 4px;
  position: absolute;
  top: 8px;
  right: 8px;
  border-radius: 4px;
  opacity: 0;
  transition: opacity 0.15s;
}
.channel-pinned-msg:hover .channel-pinned-unpin { opacity: 1; }
.channel-pinned-unpin:hover { color: #f23f43; background: rgba(242,63,67,0.1); }

/* Pin indicator on message */
.channel-msg-actions button.pinned {
  color: #f0b232 !important;
}

/* ========================================
   Permission Overrides UI
   ======================================== */

/* Permissions body layout */
.discord-cs-perms-body {
  gap: 12px !important;
}

/* Role selector bar */
.perm-roles-bar {
  background: #2b2d31;
  border-radius: 8px;
  padding: 12px;
}

.perm-roles-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
}

.perm-roles-list-vertical {
  flex-direction: column;
  align-items: stretch;
}

.perm-role-chip {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: #1e1f22;
  border: 1px solid transparent;
  border-radius: 4px;
  color: #b5bac1;
  font-size: 13px;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s;
}
.perm-role-chip:hover {
  background: #35373c;
  color: #dbdee1;
}
.perm-role-chip.active {
  background: #404249;
  border-color: #5865f2;
  color: #f2f3f5;
}

.perm-role-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  flex-shrink: 0;
}

.perm-role-remove {
  margin-left: 4px;
  font-size: 16px;
  color: #72767d;
  cursor: pointer;
  line-height: 1;
}
.perm-role-remove:hover {
  color: #f23f43;
}

/* Add role button */
.perm-add-role-wrap {
  position: relative;
}

.perm-add-role-btn {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: #5865f2;
  border: none;
  color: #fff;
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s;
}
.perm-add-role-btn:hover {
  background: #4752c4;
}

.perm-add-role-btn-v {
  background: none;
  border: 1px dashed #72767d;
  color: #b5bac1;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 13px;
  text-align: center;
  transition: all 0.15s;
}
.perm-add-role-btn-v:hover {
  border-color: #5865f2;
  color: #5865f2;
}

/* Add role dropdown */
.perm-add-role-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 4px;
  min-width: 200px;
  background: #111214;
  border-radius: 4px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.24);
  z-index: 100;
  padding: 8px;
  animation: fadeInContext 0.1s ease;
}

.perm-add-role-dropdown input {
  width: 100%;
  background: #1e1f22;
  border: none;
  border-radius: 3px;
  color: #dbdee1;
  padding: 8px;
  font-size: 13px;
  margin-bottom: 6px;
  box-sizing: border-box;
}
.perm-add-role-dropdown input:focus {
  outline: none;
  box-shadow: 0 0 0 1px #5865f2;
}

.perm-add-role-list {
  max-height: 180px;
  overflow-y: auto;
}

.perm-add-role-list button {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 8px;
  background: none;
  border: none;
  color: #b5bac1;
  font-size: 13px;
  cursor: pointer;
  border-radius: 3px;
  text-align: left;
}
.perm-add-role-list button:hover {
  background: #5865f2;
  color: #fff;
}

.perm-add-role-empty {
  color: #72767d;
  font-size: 12px;
  text-align: center;
  padding: 8px;
}

/* Permission toggle list */
.perm-toggle-list {
  flex: 1;
}

.perm-no-selection {
  color: #72767d;
  text-align: center;
  padding: 40px 20px;
}

.perm-selected-header {
  padding: 8px 0;
  color: #b5bac1;
  font-size: 14px;
  border-bottom: 1px solid #3f4147;
  margin-bottom: 12px;
}
.perm-selected-header strong {
  color: #f2f3f5;
}

.perm-section {
  margin-bottom: 20px;
}

.perm-section-heading {
  color: #b5bac1;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  margin: 0 0 8px;
}

.perm-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid rgba(79, 84, 92, 0.3);
  gap: 16px;
}
.perm-row:last-child {
  border-bottom: none;
}

.perm-row-info {
  flex: 1;
  min-width: 0;
}

.perm-row-label {
  display: block;
  color: #f2f3f5;
  font-size: 14px;
  font-weight: 500;
}

.perm-row-desc {
  display: block;
  color: #72767d;
  font-size: 12px;
  margin-top: 2px;
}

/* Three-state toggle: Deny / Inherit / Allow */
.perm-tri-toggle {
  display: flex;
  border-radius: 4px;
  overflow: hidden;
  flex-shrink: 0;
  border: 1px solid #3f4147;
}

.perm-tri-btn {
  width: 36px;
  height: 32px;
  border: none;
  background: #2b2d31;
  color: #72767d;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
}
.perm-tri-btn:not(:last-child) {
  border-right: 1px solid #3f4147;
}
.perm-tri-btn:hover {
  background: #35373c;
  color: #b5bac1;
}

.perm-tri-btn.deny.active {
  background: #f23f43;
  color: #fff;
}

.perm-tri-btn.inherit.active {
  background: #4f545c;
  color: #fff;
}

.perm-tri-btn.allow.active {
  background: #23a559;
  color: #fff;
}

/* Save bar at bottom of permissions */
.perm-save-bar {
  padding: 16px 0 4px;
  display: flex;
  justify-content: flex-end;
}

/* Category permissions modal sizing */
.discord-cat-perms-modal {
  width: 900px;
  height: 650px;
}
.discord-cat-perms-modal .discord-cs-sidebar {
  width: 240px;
  min-width: 240px;
  padding-top: 20px;
}

/* ═══════════════════════════════════════
   Unread Indicators
   ═══════════════════════════════════════ */
.discord-channel.has-unread .discord-channel-name {
  color: #f2f3f5;
  font-weight: 600;
}
.discord-channel-unread-pill {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 8px;
  background: #f2f3f5;
  border-radius: 0 4px 4px 0;
}
.discord-channel {
  position: relative;
}
.discord-channel-mention-badge {
  background: #da373c;
  color: white;
  font-size: 11px;
  font-weight: 700;
  min-width: 18px;
  height: 18px;
  border-radius: 9px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 4px;
  margin-left: auto;
  flex-shrink: 0;
}

/* ═══════════════════════════════════════
   Audit Log entries (ServerSettings)
   ═══════════════════════════════════════ */
.ss-audit-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.ss-audit-entry {
  display: flex;
  gap: 12px;
  padding: 12px 16px;
  border-radius: 4px;
  border-bottom: 1px solid #2b2d31;
}
.ss-audit-entry:hover { background: #2e3035; }
.ss-audit-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  flex-shrink: 0;
  object-fit: cover;
}
.ss-audit-entry-body { flex: 1; min-width: 0; }
.ss-audit-entry-header { display: flex; gap: 6px; align-items: baseline; flex-wrap: wrap; }
.ss-audit-entry-user { font-weight: 600; color: #f2f3f5; font-size: 14px; }
.ss-audit-entry-action {
  color: #949ba4;
  font-size: 13px;
  text-transform: capitalize;
}
.ss-audit-entry-target { color: #00a8fc; font-size: 13px; }
.ss-audit-entry-time { color: #949ba4; font-size: 12px; display: block; margin-top: 2px; }
.ss-audit-entry-details {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 6px;
}
.ss-audit-detail {
  background: #1e1f22;
  color: #b5bac1;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 4px;
}

/* Light mode */
.light-mode .discord-channel.has-unread .discord-channel-name { color: #060607; }
.light-mode .discord-channel-unread-pill { background: #060607; }
.light-mode .ss-audit-entry:hover { background: #ebedef; }
.light-mode .ss-audit-entry-user { color: #060607; }
.light-mode .ss-audit-detail { background: #e3e5e8; color: #4e5058; }
.light-mode .ss-audit-entry { border-bottom-color: #e3e5e8; }

/* ═══════════════════════════════════════════════════════════
   Forum Channel View
   ═══════════════════════════════════════════════════════════ */
.discord-forum-view {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
  background: #313338;
}
.discord-forum-view .discord-input,
.discord-forum-view input[type="text"],
.discord-forum-view textarea {
  background: #1e1f22;
  border: 1px solid #3f4147;
  border-radius: 4px;
  color: #dbdee1;
  padding: 8px 10px;
  font-size: 14px;
  box-sizing: border-box;
}
.discord-forum-view .discord-input:focus,
.discord-forum-view input:focus,
.discord-forum-view textarea:focus {
  outline: none;
  border-color: #5865f2;
}
.discord-btn-primary {
  background: #5865f2;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
}
.discord-btn-primary:hover { background: #4752c4; }
.discord-btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
.discord-btn-cancel {
  background: #4e5058;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 14px;
}
.discord-btn-cancel:hover { background: #6d6f78; }

/* ServerSettings danger small button */
.ss-btn-danger-sm {
  background: #ed4245;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 4px 10px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
}
.ss-btn-danger-sm:hover { background: #c73e40; }

/* Light mode */
.light-mode .discord-forum-view { background: #fff; }
.light-mode .discord-forum-view .discord-input,
.light-mode .discord-forum-view input[type="text"],
.light-mode .discord-forum-view textarea { background: #ebedef; border-color: #e3e5e8; color: #060607; }
